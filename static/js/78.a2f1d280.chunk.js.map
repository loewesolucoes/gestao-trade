{"version":3,"file":"static/js/78.a2f1d280.chunk.js","mappings":"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","sources":["utils/enum.ts","pages/acoes/acao-card/acao-card.tsx","components/chart.tsx","pages/home/index.tsx"],"sourcesContent":["export class EnumUtil {\r\n  public static keyFromValue(en: any, value: any): any {\r\n    return Object.keys(en)[Object.values(en).indexOf(value)]\r\n  }\r\n\r\n  public static values(en: any): any[] {\r\n    return Object.keys(en).filter(x => isNaN(x as any))\r\n  }\r\n}\r\n","\"use client\";\r\nimport \"./styles.scss\"\r\nimport { Acoes, StockType } from \"../../../repositories/acoes\";\r\nimport { EnumUtil } from \"../../../utils/enum\";\r\n\r\ninterface CustomProps {\r\n  acao: Acoes;\r\n  isActive?: boolean;\r\n  onClick: (acao: Acoes) => void;\r\n}\r\n\r\nexport function AcaoCard(props: CustomProps) {\r\n  const { acao: stock, isActive, onClick } = props;\r\n\r\n  return (\r\n    <button type=\"button\" className={`stock-card ${isActive ? 'marked' : ''} ${stock.active ? 'active' : ''}`.trim()} onClick={() => onClick(stock)}>\r\n      <img src={stock.logo} alt={stock.nome} />\r\n      <h4>{stock.nome}</h4>\r\n      <small>{stock.codigo}</small>\r\n      <div className=\"info\">\r\n        {stock.setor && (<span>{stock.setor}</span>)}\r\n        {stock.tipo && (<span>{EnumUtil.keyFromValue(StockType, stock.tipo)}</span>)}\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n","\"use client\";\r\nimport { useEffect, useRef } from 'react';\r\nimport { CrosshairMode, createChart } from 'lightweight-charts';\r\nimport moment from 'moment';\r\n\r\nexport interface ChartIntraday {\r\n  time: string,\r\n  open: number,\r\n  close: number,\r\n  high: number,\r\n  low: number,\r\n}\r\n\r\ninterface Props {\r\n  data: ChartIntraday[],\r\n  className?: string,\r\n  visibleFrom?: string,\r\n  visibleTo?: string,\r\n}\r\n\r\nlet chart: import('lightweight-charts').IChartApi;\r\n\r\nexport const ChartComponent = (props: Props) => {\r\n  const { data, visibleFrom, visibleTo, ...otherProps } = props;\r\n\r\n  const chartContainerRef = useRef() as any;\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      chart.applyOptions({ width: chartContainerRef.current.clientWidth });\r\n    };\r\n\r\n    chart = createChart(chartContainerRef.current, {\r\n      width: chartContainerRef.current.clientWidth,\r\n      height: 500,\r\n      layout: {\r\n        textColor: 'rgba(0, 0, 0, 0.9)',\r\n      },\r\n      grid: {\r\n        vertLines: {\r\n          color: 'rgba(197, 203, 206, 0.5)',\r\n        },\r\n        horzLines: {\r\n          color: 'rgba(197, 203, 206, 0.5)',\r\n        },\r\n      },\r\n      crosshair: {\r\n        mode: CrosshairMode.Normal,\r\n      },\r\n      rightPriceScale: {\r\n        borderColor: 'rgba(197, 203, 206, 0.8)',\r\n      },\r\n      timeScale: {\r\n        borderColor: 'rgba(197, 203, 206, 0.8)',\r\n      },\r\n    });\r\n\r\n    const candleSeries = chart.addCandlestickSeries({});\r\n\r\n    candleSeries.setData(data);\r\n\r\n    setVisibleRange();\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n\r\n      chart.remove();\r\n    };\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    setVisibleRange();\r\n  }, [visibleFrom, visibleTo]);\r\n\r\n  function setVisibleRange() {\r\n    if (visibleFrom == null || visibleTo == null)\r\n      chart.timeScale().fitContent();\r\n    else // @ts-ignore\r\n      chart.timeScale().setVisibleRange({ from: moment(visibleFrom).unix(), to: moment(visibleTo).unix() });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={chartContainerRef}\r\n      {...otherProps} />\r\n  );\r\n};","import logo from './logo.svg';\nimport './index.scss';\nimport { Layout } from '../../shared/layout';\nimport { useEffect, useState } from 'react';\nimport { Acoes } from '../../repositories/acoes';\nimport { useStorage } from '../../contexts/storage';\nimport { AcaoCard } from '../acoes/acao-card/acao-card';\nimport { ChartComponent } from '../../components/chart';\nimport { NotificationUtil } from '../../utils/notification';\n\ninterface HistoricoAcao { }\n\nexport default function () {\n  const [acoes, setAcoes] = useState<Acoes[]>();\n  const [acaoEscolhida, setAcaoEscolhida] = useState<string>();\n  const [historico, setHistorico] = useState<HistoricoAcao[]>([]);\n  const { isDbOk, repository } = useStorage();\n\n  useEffect(() => {\n    document.title = `Início | ${process.env.REACT_APP_TITLE}`\n  }, []);\n\n  useEffect(() => {\n    if (isDbOk)\n      load();\n  }, [isDbOk]);\n\n  useEffect(() => {\n    if (isDbOk)\n      loadHistory();\n  }, [isDbOk, acaoEscolhida]);\n\n  async function load() {\n    const acoes = await repository.acoes.listActives();\n\n    setAcoes(acoes);\n  }\n\n  async function loadHistory() {\n    if (acaoEscolhida == null) return;\n\n    // const response = await fetch(`https://localhost:7062/stock/history?stockId=${currentStock}`);\n    // const json = (await response.json()) as StockHistoryResponse;\n\n    // setHistory(json.data.map(x => ({\n    //   time: moment(x.date).format('YYYY-MM-DD'),\n    //   open: x.open,\n    //   close: x.close,\n    //   high: x.max,\n    //   low: x.min,\n    // })));\n\n    // setHistoryOriginal(json.data);\n  }\n\n  return (\n    <Layout>\n      <section className='container'>\n        {acoes == null ? <div className=\"alert alert-info\">Carregando ações ativas...</div>\n          : (\n            acoes.length === 0 ? (<div className=\"alert alert-info\">Nenhuma ação ativa...</div>) : (\n              <div className=\"stocks\">\n                {acoes.map(x => (\n                  <AcaoCard key={x.codigo} acao={x} isActive={x.codigo === acaoEscolhida} onClick={s => setAcaoEscolhida(s.codigo)} />\n                ))}\n              </div>\n            )\n          )\n        }\n        {acaoEscolhida == null ? <div className=\"alert alert-warning\">Escolha uma ação para analisar</div>\n          : <>\n            <section className=\"card analysis\">\n              <div className=\"card-header\">Analise</div>\n            </section>\n            {historico == null ? <div className=\"alert alert-info\">Carregando histórico...</div>\n              : <ChartComponent className=\"chart container-sm\" data={[]}></ChartComponent>}\n          </>\n        }\n      </section>\n    </Layout>\n  );\n}\n"],"names":["EnumUtil","keyFromValue","en","value","Object","keys","values","indexOf","filter","x","isNaN","AcaoCard","props","acao","stock","isActive","onClick","_jsxs","type","className","concat","active","trim","children","_jsx","src","logo","alt","nome","codigo","setor","tipo","StockType","chart","ChartComponent","data","visibleFrom","visibleTo","otherProps","chartContainerRef","useRef","setVisibleRange","timeScale","fitContent","from","moment","unix","to","useEffect","handleResize","applyOptions","width","current","clientWidth","createChart","height","layout","textColor","grid","vertLines","color","horzLines","crosshair","mode","CrosshairMode","Normal","rightPriceScale","borderColor","addCandlestickSeries","setData","window","addEventListener","removeEventListener","remove","ref","acoes","setAcoes","useState","acaoEscolhida","setAcaoEscolhida","historico","setHistorico","isDbOk","repository","useStorage","document","title","process","async","listActives","load","loadHistory","Layout","length","map","s","_Fragment"],"sourceRoot":""}