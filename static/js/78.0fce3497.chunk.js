"use strict";(self.webpackChunkgestao_trade=self.webpackChunkgestao_trade||[]).push([[78],{964:(e,t,a)=>{a.d(t,{l:()=>o});var s=a(642);class i{static keyFromValue(e,t){return Object.keys(e)[Object.values(e).indexOf(t)]}static values(e){return Object.keys(e).filter((e=>isNaN(e)))}}var r=a(579);function o(e){const{acao:t,isActive:a,onClick:o}=e;return(0,r.jsxs)("button",{type:"button",className:"stock-card ".concat(a?"marked":""," ").concat(t.active?"active":"").trim(),onClick:()=>o(t),children:[(0,r.jsx)("img",{src:t.logo,alt:t.nome}),(0,r.jsx)("h4",{children:t.nome}),(0,r.jsx)("small",{children:t.codigo}),(0,r.jsxs)("div",{className:"info",children:[t.setor&&(0,r.jsx)("span",{children:t.setor}),t.tipo&&(0,r.jsx)("span",{children:i.keyFromValue(s.t,t.tipo)})]})]})}},78:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var s=a(415),i=a(43),r=a(401),o=a(964),n=a(547),c=a(178),l=a.n(c),d=a(579);let u;const m=e=>{const{data:t,visibleFrom:a,visibleTo:s,...r}=e,o=(0,i.useRef)();function c(){null==a||null==s?u.timeScale().fitContent():u.timeScale().setVisibleRange({from:l()(a).unix(),to:l()(s).unix()})}return(0,i.useEffect)((()=>{const e=()=>{u.applyOptions({width:o.current.clientWidth})};u=(0,n.R9)(o.current,{width:o.current.clientWidth,height:500,layout:{textColor:"rgba(0, 0, 0, 0.9)"},grid:{vertLines:{color:"rgba(197, 203, 206, 0.5)"},horzLines:{color:"rgba(197, 203, 206, 0.5)"}},crosshair:{mode:n._q.Normal},rightPriceScale:{borderColor:"rgba(197, 203, 206, 0.8)"},timeScale:{borderColor:"rgba(197, 203, 206, 0.8)"}});return u.addCandlestickSeries({}).setData(t),c(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e),u.remove()}}),[t]),(0,i.useEffect)((()=>{c()}),[a,s]),(0,d.jsx)("div",{ref:o,...r})};function h(){const[e,t]=(0,i.useState)(),[a,n]=(0,i.useState)(),[c,u]=(0,i.useState)(),{isDbOk:h,repository:v}=(0,r.r)();return(0,i.useEffect)((()=>{document.title="In\xedcio | ".concat("Gest\xe3o de trading")}),[]),(0,i.useEffect)((()=>{h&&async function(){const e=await v.acoes.listActives();t(e)}()}),[h]),(0,i.useEffect)((()=>{h&&async function(){if(u(void 0),null==a)return;const e=await v.historicoAcoes.listByCode(a);u(e.map((e=>{var t,a,s,i;return{time:l()(e.date).format("YYYY-MM-DD"),open:null===(t=e.open)||void 0===t?void 0:t.toNumber(),close:null===(a=e.close)||void 0===a?void 0:a.toNumber(),high:null===(s=e.high)||void 0===s?void 0:s.toNumber(),low:null===(i=e.low)||void 0===i?void 0:i.toNumber()}})))}()}),[h,a]),(0,d.jsx)(s.P,{children:(0,d.jsxs)("section",{className:"container",children:[null==e?(0,d.jsx)("div",{className:"alert alert-info",children:"Carregando a\xe7\xf5es ativas..."}):0===e.length?(0,d.jsx)("div",{className:"alert alert-info",children:"Nenhuma a\xe7\xe3o ativa..."}):(0,d.jsx)("div",{className:"stocks",children:e.map((e=>(0,d.jsx)(o.l,{acao:e,isActive:e.codigo===a,onClick:e=>n(e.codigo)},e.codigo)))}),null==a?(0,d.jsx)("div",{className:"alert alert-warning",children:"Escolha uma a\xe7\xe3o para analisar"}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("section",{className:"card analysis",children:(0,d.jsx)("div",{className:"card-header",children:"Analise"})}),null==c?(0,d.jsx)("div",{className:"alert alert-info",children:"Carregando hist\xf3rico..."}):(0,d.jsx)(m,{className:"chart container-sm",data:c})]})]})})}}}]);
//# sourceMappingURL=78.0fce3497.chunk.js.map