{"version":3,"file":"static/js/786.920d277a.chunk.js","mappings":"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","sources":["components/input.tsx","utils/enum.ts","pages/acoes/acao-card/acao-card.tsx","components/chart.tsx","services/analysis.ts","pages/home/index.tsx"],"sourcesContent":["\"use client\";\r\nimport BigNumber from 'bignumber.js';\r\nimport moment from 'moment';\r\n\r\ninterface CustomProps extends React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement> {\r\n  isNumber?: boolean,\r\n  isPercent?: boolean,\r\n  groupSymbolLeft?: string,\r\n  groupSymbolRight?: string,\r\n  onChange: React.Dispatch<React.SetStateAction<any>>,\r\n  value: any,\r\n}\r\n\r\nexport function Input(props: CustomProps) {\r\n  const { onChange, isNumber, groupSymbolLeft, groupSymbolRight, isPercent, value, ...otherProps } = props;\r\n  const isInputNumber = props.type === 'number' || isNumber;\r\n  const isInputDate = props.type === 'date';\r\n  const isInputMonth = props.type === 'month';\r\n  const isTextArea = props.type === 'textarea';\r\n\r\n  function onChangeInput(event: any) {\r\n    const { value } = event.target;\r\n\r\n    const onChangeOrDefault = onChange || function () { };\r\n\r\n    if (isPercent)\r\n      onChangeOrDefault(BigNumber(value).div(100));\r\n    else if (isInputNumber)\r\n      onChangeOrDefault(BigNumber(value));\r\n    else if (isInputDate)\r\n      onChangeOrDefault(moment(value, 'YYYY-MM-DD').toDate());\r\n    else if (isInputMonth)\r\n      onChangeOrDefault(moment(value, 'YYYY-MM').toDate());\r\n    else\r\n      onChangeOrDefault(value);\r\n  }\r\n\r\n  const inputValue = parseInputValue(value, isInputNumber, isInputDate, isInputMonth, isPercent);\r\n  const input = isTextArea ? <textarea className=\"form-control\" onChange={onChangeInput} value={inputValue} {...otherProps as any} /> : <input className=\"form-control\" onChange={onChangeInput} value={inputValue} {...otherProps} />;\r\n\r\n  return groupSymbolLeft || groupSymbolRight ? (\r\n    <div className=\"input-group mb-3\">\r\n      {groupSymbolLeft && <span className=\"input-group-text\">{groupSymbolLeft}</span>}\r\n      {input}\r\n      {groupSymbolRight && <span className=\"input-group-text\">{groupSymbolRight}</span>}\r\n    </div>\r\n  ) : input;\r\n}\r\n\r\nfunction parseInputValue(value: any, isInputNumber?: boolean, isInputDate?: boolean, isInputMonth?: boolean, isPercent?: boolean) {\r\n  if (isInputNumber)\r\n    return parseNumber(value, { isPercent });\r\n\r\n  if (isInputDate)\r\n    return moment(value).format('YYYY-MM-DD');\r\n\r\n  if (isInputMonth)\r\n    return moment(value).format('YYYY-MM');\r\n\r\n  return value || ''\r\n}\r\n\r\nfunction parseNumber(value: BigNumber, { isPercent }: any) {\r\n  if (value == null || isNaN(value.toNumber()))\r\n    return '';\r\n\r\n  return isPercent ? value.times(100).toNumber() : value.toNumber();\r\n}\r\n\r\n","export class EnumUtil {\r\n  public static keyFromValue(en: any, value: any): any {\r\n    return Object.keys(en)[Object.values(en).indexOf(value)]\r\n  }\r\n\r\n  public static values(en: any): any[] {\r\n    return Object.keys(en).filter(x => isNaN(x as any))\r\n  }\r\n}\r\n","\"use client\";\r\nimport \"./styles.scss\"\r\nimport { Acoes, StockType } from \"../../../repositories/acoes\";\r\nimport { EnumUtil } from \"../../../utils/enum\";\r\n\r\ninterface CustomProps {\r\n  acao: Acoes;\r\n  isActive?: boolean;\r\n  onClick: (acao: Acoes) => void;\r\n}\r\n\r\nexport function AcaoCard(props: CustomProps) {\r\n  const { acao: stock, isActive, onClick } = props;\r\n\r\n  return (\r\n    <button type=\"button\" className={`stock-card ${isActive ? 'marked' : ''} ${stock.active ? 'active' : ''}`.trim()} onClick={() => onClick(stock)}>\r\n      <img src={stock.logo} alt={stock.nome} />\r\n      <h4>{stock.nome}</h4>\r\n      <small>{stock.codigo}</small>\r\n      <div className=\"info\">\r\n        {stock.setor && (<span>{stock.setor}</span>)}\r\n        {stock.tipo && (<span>{EnumUtil.keyFromValue(StockType, stock.tipo)}</span>)}\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n","\"use client\";\r\nimport { useEffect, useRef } from 'react';\r\nimport { CrosshairMode, createChart } from 'lightweight-charts';\r\nimport moment from 'moment';\r\n\r\nexport interface ChartIntraday {\r\n  time: string,\r\n  open?: number,\r\n  close?: number,\r\n  high?: number,\r\n  low?: number,\r\n}\r\n\r\nexport interface ChartFiboLines {\r\n  fibo0: number\r\n  fibo382: number\r\n  fibo618: number\r\n  fibo50: number\r\n  fibo1000: number\r\n  dataInicio: Date\r\n  dataFim: Date\r\n}\r\n\r\ninterface CustomProps {\r\n  data: ChartIntraday[],\r\n  analysis: ChartFiboLines[],\r\n  className?: string,\r\n  visibleFrom?: string,\r\n  visibleTo?: string,\r\n}\r\n\r\nlet chart: import('lightweight-charts').IChartApi;\r\n\r\nexport const ChartComponent = (props: CustomProps) => {\r\n  const { data, analysis, visibleFrom, visibleTo, ...otherProps } = props;\r\n\r\n  const chartContainerRef = useRef() as any;\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      chart.applyOptions({ width: chartContainerRef.current.clientWidth });\r\n    };\r\n\r\n    chart = createChart(chartContainerRef.current, {\r\n      width: chartContainerRef.current.clientWidth,\r\n      height: 500,\r\n      layout: {\r\n        textColor: 'rgba(0, 0, 0, 0.9)',\r\n      },\r\n      grid: {\r\n        vertLines: {\r\n          color: 'rgba(197, 203, 206, 0.5)',\r\n        },\r\n        horzLines: {\r\n          color: 'rgba(197, 203, 206, 0.5)',\r\n        },\r\n      },\r\n      crosshair: {\r\n        mode: CrosshairMode.Normal,\r\n      },\r\n      rightPriceScale: {\r\n        borderColor: 'rgba(197, 203, 206, 0.8)',\r\n      },\r\n      timeScale: {\r\n        borderColor: 'rgba(197, 203, 206, 0.8)',\r\n      },\r\n    });\r\n\r\n    const candleSeries = chart.addCandlestickSeries({});\r\n\r\n    candleSeries.setData(data);\r\n\r\n    setVisibleRange();\r\n\r\n    for (let index = 0; index < analysis.length; index++) {\r\n      const x = analysis[index];\r\n      const currentColor = getRandomColor();\r\n\r\n      const lineSerieFibo0 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: 0,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      })\r\n\r\n      lineSerieFibo0.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo0 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo0 },\r\n      ])\r\n      const lineSerieFibo382 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: 2,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      })\r\n\r\n      lineSerieFibo382.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo382 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo382 },\r\n      ])\r\n      const lineSerieFibo618 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: 2,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      })\r\n\r\n      lineSerieFibo618.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo618 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo618 },\r\n      ])\r\n      const lineSerieFibo50 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: 1,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      })\r\n\r\n      lineSerieFibo50.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo50 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo50 },\r\n      ])\r\n      const lineSerieFibo1000 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: 0,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      })\r\n\r\n      lineSerieFibo1000.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo1000 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo1000 },\r\n      ])\r\n    }\r\n    // candleSeries.createPriceLine({\r\n    //   price: x.fibo382,\r\n    //   color: '#000',\r\n    //   title: 'fibo382',\r\n    // })\r\n\r\n    // candleSeries.createPriceLine({\r\n    //   price: x.fibo618,\r\n    //   color: '#000',\r\n    //   title: 'fibo618',\r\n    // })\r\n\r\n    // candleSeries.createPriceLine({\r\n    //   price: x.fibo50,\r\n    //   color: '#000',\r\n    //   title: 'fibo50',\r\n    // })\r\n\r\n    // candleSeries.createPriceLine({\r\n    //   price: x.fibo1000,\r\n    //   color: '#000',\r\n    //   title: 'fibo1000',\r\n    //   lineStyle: 0,\r\n    // })\r\n\r\n    // for (let index = 0; index < analysis.length; index++) {\r\n    //   const element = analysis[index];\r\n\r\n    // }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n\r\n      chart.remove();\r\n    };\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    setVisibleRange();\r\n  }, [visibleFrom, visibleTo]);\r\n\r\n  function setVisibleRange() {\r\n    if (visibleFrom == null || visibleTo == null)\r\n      chart.timeScale().fitContent();\r\n    else // @ts-ignore\r\n      chart.timeScale().setVisibleRange({ from: moment(visibleFrom).unix(), to: moment(visibleTo).unix() });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={chartContainerRef}\r\n      {...otherProps} />\r\n  );\r\n};\r\n\r\nfunction getRandomColor() {\r\n  var letters = '0123456789ABCDEF';\r\n  var color = '#';\r\n  for (var i = 0; i < 6; i++) {\r\n    color += letters[Math.floor(Math.random() * 16)];\r\n  }\r\n  return color;\r\n}","import moment from \"moment\";\r\nimport { HistoricoAcoes } from \"../repositories/historico-acoes\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\nexport enum MovementType {\r\n  SUBIDA = \"SUBIDA\",\r\n  DESCIDA = \"DESCIDA\",\r\n  UNCOMPLETED = \"UNCOMPLETED\",\r\n}\r\n\r\nexport enum TopBottomType {\r\n  TOPO = \"TOPO\",\r\n  FUNDO = \"FUNDO\"\r\n}\r\n\r\nexport enum PivosType {\r\n  ALTA = \"ALTA\",\r\n  BAIXA = \"BAIXA\"\r\n}\r\n\r\ninterface FiboEAlvos {\r\n  movements: HistoricoAcoes[]\r\n  fibo0?: BigNumber\r\n  fibo382?: BigNumber\r\n  fibo618?: BigNumber\r\n  fibo50?: BigNumber\r\n  fibo1000?: BigNumber\r\n  alvo1?: BigNumber\r\n  bateuAlvo1?: boolean\r\n  alvo2?: BigNumber\r\n  bateuAlvo2?: boolean\r\n  alvo3?: BigNumber\r\n  bateuAlvo3?: boolean\r\n}\r\n\r\ninterface ExtremosToposEFundos extends HistoricoAcoes {\r\n  index: number\r\n  order: number\r\n  data: ExtremosData\r\n  type: TopBottomType\r\n}\r\n\r\ninterface ExtremosData extends HistoricoAcoes {\r\n  type: TopBottomType\r\n}\r\n\r\nclass AnalysisService {\r\n  public run(historyOriginal: HistoricoAcoes[], initialDate: string, endDate: string): FiboEAlvos[] {\r\n    if (historyOriginal.length === 0) return [];\r\n    const filteredHistory = historyOriginal.filter(x => moment(x.date).isBetween(initialDate, endDate));\r\n\r\n    const toposEFundos = this.toposEFundos(filteredHistory, 2);\r\n    const movementsAlta = this.parseToMovementsTresPontos(toposEFundos, PivosType.ALTA);\r\n    const movementsBaixa = this.parseToMovementsTresPontos(toposEFundos, PivosType.BAIXA);\r\n    const movementsAltaWithFibo = this.criarFiboEAlvos(movementsAlta);\r\n    const movementsBaixaWithFibo = this.criarFiboEAlvos(movementsBaixa);\r\n\r\n    return movementsAltaWithFibo.concat(movementsBaixaWithFibo);\r\n  }\r\n\r\n  private criarFiboEAlvos(toposEFundos: any[]) {\r\n    const lastMovements = toposEFundos[toposEFundos.length - 1]?.movements || [];\r\n    const lastDay = lastMovements[lastMovements.length - 1];\r\n\r\n    return toposEFundos\r\n      .map(x => {\r\n        const atual = { ...x };\r\n        const first = atual.movements[0];\r\n        const last = atual.movements[atual.movements.length - 1];\r\n        const differenceLastHighFirstLow = last.high.minus(first.low);\r\n\r\n        atual.dataInicio = first.date;\r\n        atual.dataFim = last.date;\r\n\r\n        if (atual.type === MovementType.DESCIDA) {\r\n          atual.fibo0 = first.high; // z\r\n          atual.fibo382 = first.high.minus((differenceLastHighFirstLow).times(.382));\r\n          atual.fibo618 = first.high.minus((differenceLastHighFirstLow).times(.618));\r\n          atual.fibo50 = first.high.minus((differenceLastHighFirstLow).times(.50));\r\n          atual.fibo1000 = last.low; // y\r\n          atual.alvo1 = ((atual.fibo618.minus(atual.fibo0)).div(.618)).plus(atual.fibo618); // y2 = ((x - z) / 0,618) + x\r\n          atual.bateuAlvo1 = lastDay.low.isLessThanOrEqualTo(atual.alvo1);\r\n          atual.alvo2 = ((atual.fibo50.minus(atual.fibo0)).div(.5)).plus(atual.fibo1000); // y3 = ((x - z) / 0,5) + y\r\n          atual.bateuAlvo2 = lastDay.low.isLessThanOrEqualTo(atual.alvo2);\r\n          atual.alvo3 = ((atual.fibo382.minus(atual.fibo0)).div(.382)).plus(atual.alvo1); // y4 = ((x - z) / 0,382) + y2\r\n          atual.bateuAlvo3 = lastDay.low.isLessThanOrEqualTo(atual.alvo3);\r\n        } else {\r\n          atual.fibo0 = first.low; // z\r\n          atual.fibo382 = first.low.plus((differenceLastHighFirstLow.times(.382)));\r\n          atual.fibo618 = first.low.plus(differenceLastHighFirstLow.times(.618));\r\n          atual.fibo50 = first.low.plus(differenceLastHighFirstLow.times(.50));\r\n          atual.fibo1000 = last.high; // y\r\n          atual.alvo1 = ((atual.fibo618.minus(atual.fibo0)).div(.618)).plus(atual.fibo618); // y2 = ((x - z) / 0,618) + x\r\n          atual.bateuAlvo1 = lastDay.high.isGreaterThanOrEqualTo(atual.alvo1);\r\n          atual.alvo2 = ((atual.fibo50.minus(atual.fibo0)).div(.5)).plus(atual.fibo1000); // y3 = ((x - z) / 0,5) + y\r\n          atual.bateuAlvo2 = lastDay.high.isGreaterThanOrEqualTo(atual.alvo2);\r\n          atual.alvo3 = ((atual.fibo382.minus(atual.fibo0)).div(.382)).plus(atual.alvo1); // y4 = ((x - z) / 0,382) + y2\r\n          atual.bateuAlvo3 = lastDay.high.isGreaterThanOrEqualTo(atual.alvo3);\r\n        }\r\n\r\n        return atual;\r\n      });\r\n  }\r\n\r\n  // fazer parse dos movimentos baseado em tres pontos do grafico: FUNDO, TOPO, FUNDO\r\n  // comparar primeiro fundo com o proximo\r\n  // se estiver mais alto, é uma subida\r\n  // se estiver mais baixo é uma descida\r\n  private parseToMovementsTresPontos(history: ExtremosToposEFundos[], pivo: PivosType) {\r\n    return history\r\n      .reduce(((previous, next) => {\r\n        const last = previous[previous.length - 1];\r\n\r\n        if (last == null) {\r\n          fillFirstInfo();\r\n        } else if (last.movements.length === 1) {\r\n          last.movements.push(next.data);\r\n\r\n          if (previous.length === 1) {\r\n            if (pivo === PivosType.ALTA && next.type == TopBottomType.FUNDO) fillFirstInfo();\r\n            if (pivo === PivosType.BAIXA && next.type == TopBottomType.TOPO) fillFirstInfo();\r\n          }\r\n\r\n        } else {\r\n          const firstData = last.movements[0];\r\n\r\n          last.movements.push(next.data);\r\n\r\n          if (pivo === PivosType.BAIXA)\r\n            last.movementType = firstData.high?.isLessThanOrEqualTo(next.data.high) ? MovementType.SUBIDA : MovementType.DESCIDA;\r\n          else\r\n            last.movementType = firstData.low?.isLessThanOrEqualTo(next.data.low) ? MovementType.SUBIDA : MovementType.DESCIDA;\r\n\r\n          fillFirstInfo();\r\n        }\r\n\r\n        return previous;\r\n\r\n        function fillFirstInfo() {\r\n          previous.push({\r\n            index: next.index,\r\n            order: next.order,\r\n            movements: [next.data],\r\n            movementType: MovementType.UNCOMPLETED,\r\n          });\r\n        }\r\n      }), [] as any[]);\r\n  }\r\n\r\n  private parseToMovementsDoisPontos(history: any[]) {\r\n    return history\r\n      .reduce(((previous, next) => {\r\n        const last = previous[previous.length - 1];\r\n\r\n        if (last == null) {\r\n          previous.push({\r\n            index: next.index,\r\n            order: next.order,\r\n            movements: [next.data],\r\n            movementType: MovementType.UNCOMPLETED,\r\n          });\r\n        } else {\r\n          const lastData = last.movements[last.movements.length - 1];\r\n\r\n          if (lastData.min <= next.data.min) {\r\n            previous.push({\r\n              index: last.index,\r\n              order: last.order,\r\n              movements: [lastData, next.data],\r\n              movementType: MovementType.SUBIDA,\r\n            });\r\n          } else {\r\n            previous.push({\r\n              index: last.index,\r\n              order: last.order,\r\n              movements: [lastData, next.data],\r\n              movementType: MovementType.DESCIDA,\r\n            });\r\n          }\r\n        }\r\n\r\n        return previous;\r\n      }), [] as any[]);\r\n  }\r\n\r\n  private toposEFundos(data: HistoricoAcoes[], order: number) {\r\n    const extremos = this.extremos(data, order);\r\n\r\n    const toposEFundos = extremos.topos.concat(extremos.fundos).sort((x, y) => {\r\n      if (x.index < y.index)\r\n        return -1;\r\n\r\n      if (x.index > y.index)\r\n        return 1;\r\n\r\n      return 0;\r\n    }) as any[];\r\n\r\n    const toposEFundosCompleto = toposEFundos.reduce(((previous, next) => {\r\n      const last = previous[previous.length - 1];\r\n\r\n      if (last?.type != next.type)\r\n        previous.push(next);\r\n\r\n      return previous;\r\n    }), [] as any[]);\r\n\r\n    return toposEFundosCompleto;\r\n  }\r\n\r\n  private extremos(data: HistoricoAcoes[], order: number) {\r\n    const topos: ExtremosToposEFundos[] = []\r\n    const fundos: ExtremosToposEFundos[] = []\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n      if (this.ehTopo(data, i, order)) {\r\n        topos.push({\r\n          index: i,\r\n          order: i - order,\r\n          date: data[i].date,\r\n          data: {\r\n            ...data[i],\r\n            type: TopBottomType.TOPO,\r\n          },\r\n          type: TopBottomType.TOPO,\r\n        } as any)\r\n      }\r\n\r\n      if (this.ehFundo(data, i, order)) {\r\n        fundos.push({\r\n          index: i,\r\n          order: i - order,\r\n          date: data[i].date,\r\n          data: {\r\n            ...data[i],\r\n            type: TopBottomType.FUNDO,\r\n          },\r\n          type: TopBottomType.FUNDO,\r\n        } as any)\r\n      }\r\n    }\r\n\r\n    return { topos, fundos }\r\n  }\r\n\r\n  // tks https://www.youtube.com/watch?v=X31hyMhB-3s\r\n  // Checks if there is a local top detected at curr index\r\n  private ehTopo(data: HistoricoAcoes[], index: number, order: number) {\r\n    var top = true\r\n    var currentMax = data[index].high\r\n\r\n    for (let orderIndex = 1; orderIndex < order + 1; orderIndex++) {\r\n      const nextMax = data[index + orderIndex]?.high;\r\n      const proximoEhMaior = currentMax?.isLessThanOrEqualTo(nextMax as any);\r\n\r\n      if (nextMax == null || proximoEhMaior) {\r\n        top = false\r\n        break;\r\n      }\r\n    }\r\n\r\n    return top\r\n  }\r\n\r\n  private ehFundo(data: HistoricoAcoes[], index: number, order: number) {\r\n    var bottom = true\r\n    var currentMin = data[index].low\r\n\r\n    for (let orderIndex = 1; orderIndex < order + 1; orderIndex++) {\r\n      const nextMin = data[index + orderIndex]?.low;\r\n      const proximoEhMenor = currentMin?.isGreaterThanOrEqualTo(nextMin as any);\r\n\r\n      if (nextMin == null || proximoEhMenor) {\r\n        bottom = false\r\n        break;\r\n      }\r\n    }\r\n\r\n    return bottom\r\n  }\r\n\r\n}\r\n\r\n\r\nexport const analysisService = new AnalysisService();","import logo from './logo.svg';\nimport './index.scss';\nimport { Layout } from '../../shared/layout';\nimport { useEffect, useState } from 'react';\nimport { Acoes } from '../../repositories/acoes';\nimport { useStorage } from '../../contexts/storage';\nimport { AcaoCard } from '../acoes/acao-card/acao-card';\nimport { ChartComponent, ChartIntraday } from '../../components/chart';\nimport { NotificationUtil } from '../../utils/notification';\nimport moment from 'moment';\nimport { analysisService } from '../../services/analysis';\nimport { Input } from '../../components/input';\nimport { useEnv } from '../../contexts/env';\n\nexport default function () {\n  const { isMobile } = useEnv();\n  const { isDbOk, repository } = useStorage();\n\n  const monthsBefore = isMobile ? -1 : -3;\n  const [initialDate, setInitialDate] = useState<string>(moment().add(monthsBefore, 'months').format('YYYY-MM-DD'));\n  const [endDate, setEndDate] = useState<string>(moment().format('YYYY-MM-DD'));\n  const [acoes, setAcoes] = useState<Acoes[]>();\n  const [acaoEscolhida, setAcaoEscolhida] = useState<string>();\n  const [historico, setHistorico] = useState<ChartIntraday[]>();\n  const [analysis, setAnalysis] = useState<any>();\n\n  useEffect(() => {\n    document.title = `Início | ${process.env.REACT_APP_TITLE}`\n  }, []);\n\n  useEffect(() => {\n    if (isDbOk)\n      load();\n  }, [isDbOk]);\n\n  useEffect(() => {\n    if (isDbOk)\n      loadHistory();\n  }, [isDbOk, acaoEscolhida]);\n\n  async function load() {\n    const acoes = await repository.acoes.listActives();\n\n    setAcoes(acoes);\n  }\n\n  async function loadHistory() {\n    setHistorico(undefined);\n    if (acaoEscolhida == null) return;\n\n    const historico = await repository.historicoAcoes.listByCode(acaoEscolhida);\n\n    setHistorico(historico.map(x => ({\n      time: moment(x.date).format('YYYY-MM-DD'),\n      open: x.open?.toNumber(),\n      close: x.close?.toNumber(),\n      high: x.high?.toNumber(),\n      low: x.low?.toNumber(),\n    })));\n\n    const analysis = analysisService.run(historico, initialDate, endDate);\n\n    setAnalysis(analysis\n      // @ts-ignore\n      .filter(x => x.movementType !== 'UNCOMPLETED')\n      .map(x => ({\n        ...x,\n        alvo1: x.alvo1?.toNumber(),\n        alvo2: x.alvo2?.toNumber(),\n        alvo3: x.alvo3?.toNumber(),\n        fibo0: x.fibo0?.toNumber(),\n        fibo382: x.fibo382?.toNumber(),\n        fibo618: x.fibo618?.toNumber(),\n        fibo50: x.fibo50?.toNumber(),\n        fibo1000: x.fibo1000?.toNumber(),\n      })));\n  }\n\n  return (\n    <Layout>\n      <section className='container'>\n        <div className=\"configs\">\n          <div className=\"form-group\">\n            <label htmlFor=\"dataInicio\" className=\"form-label\">Data inicio:</label>\n            <Input type=\"date\" id=\"dataInicio\" name=\"dataInicio\" className=\"form-control\" value={initialDate} onChange={value => setInitialDate(value)} />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"dataFim\" className=\"form-label\">Data fim:</label>\n            <Input type=\"date\" id=\"dataFim\" name=\"dataFim\" className=\"form-control\" value={endDate} onChange={value => setEndDate(value)} />\n          </div>\n        </div>\n        {acoes == null ? <div className=\"alert alert-info\">Carregando ações ativas...</div>\n          : (\n            acoes.length === 0 ? (<div className=\"alert alert-info\">Nenhuma ação ativa...</div>) : (\n              <div className=\"stocks\">\n                {acoes.map(x => (\n                  <AcaoCard key={x.codigo} acao={x} isActive={x.codigo === acaoEscolhida} onClick={s => setAcaoEscolhida(s.codigo)} />\n                ))}\n              </div>\n            )\n          )\n        }\n        {acaoEscolhida == null ? <div className=\"alert alert-warning\">Escolha uma ação para analisar</div>\n          : <>\n            <section className=\"card analysis\">\n              <div className=\"card-header\">Analise</div>\n              <div className=\"card-body\">\n                {analysis == null ? <div className=\"alert alert-info\">Carregando analises...</div>\n                  : (\n                    <div style={{ \"whiteSpace\": \"pre\", maxHeight: 300, overflow: 'auto' }}>{filterAnalysis(analysis)}</div>\n                  )\n                }\n              </div>\n            </section>\n            {historico == null ? <div className=\"alert alert-info\">Carregando histórico...</div>\n              : <ChartComponent className=\"chart\" data={historico as any} visibleFrom={initialDate} visibleTo={endDate} analysis={analysis}></ChartComponent>}\n          </>\n        }\n      </section>\n    </Layout>\n  );\n}\n\nfunction filterAnalysis(analysis: any): any {\n  return JSON.stringify(\n    analysis\n      // .filter((x: any) => x.bateuAlvo1)\n      .map((x: any) => {\n        x.movements = undefined;\n        return x;\n      })\n    , null, 4);\n}\n"],"names":["Input","props","onChange","isNumber","groupSymbolLeft","groupSymbolRight","isPercent","value","otherProps","isInputNumber","type","isInputDate","isInputMonth","isTextArea","onChangeInput","event","target","onChangeOrDefault","BigNumber","div","moment","toDate","inputValue","_ref","isNaN","toNumber","times","parseNumber","format","parseInputValue","input","_jsx","className","_jsxs","children","EnumUtil","keyFromValue","en","Object","keys","values","indexOf","filter","x","AcaoCard","acao","stock","isActive","onClick","concat","active","trim","src","logo","alt","nome","codigo","setor","tipo","StockType","chart","ChartComponent","data","analysis","visibleFrom","visibleTo","chartContainerRef","useRef","setVisibleRange","timeScale","fitContent","from","unix","to","useEffect","handleResize","applyOptions","width","current","clientWidth","createChart","height","layout","textColor","grid","vertLines","color","horzLines","crosshair","mode","CrosshairMode","Normal","rightPriceScale","borderColor","addCandlestickSeries","setData","index","length","currentColor","getRandomColor","addLineSeries","lineStyle","lastValueVisible","priceLineVisible","time","dataInicio","fibo0","dataFim","fibo382","fibo618","fibo50","fibo1000","window","addEventListener","removeEventListener","remove","ref","i","Math","floor","random","MovementType","TopBottomType","PivosType","analysisService","run","historyOriginal","initialDate","endDate","filteredHistory","date","isBetween","toposEFundos","this","movementsAlta","parseToMovementsTresPontos","ALTA","movementsBaixa","BAIXA","movementsAltaWithFibo","criarFiboEAlvos","movementsBaixaWithFibo","_toposEFundos","lastMovements","movements","lastDay","map","atual","first","last","differenceLastHighFirstLow","high","minus","low","DESCIDA","alvo1","plus","bateuAlvo1","isLessThanOrEqualTo","alvo2","bateuAlvo2","alvo3","bateuAlvo3","isGreaterThanOrEqualTo","history","pivo","reduce","previous","next","fillFirstInfo","push","FUNDO","TOPO","_firstData$high","_firstData$low","firstData","movementType","SUBIDA","order","UNCOMPLETED","parseToMovementsDoisPontos","lastData","min","extremos","topos","fundos","sort","y","ehTopo","ehFundo","top","currentMax","orderIndex","_data","nextMax","proximoEhMaior","bottom","currentMin","_data2","nextMin","proximoEhMenor","isMobile","useEnv","isDbOk","repository","useStorage","monthsBefore","setInitialDate","useState","add","setEndDate","acoes","setAcoes","acaoEscolhida","setAcaoEscolhida","historico","setHistorico","setAnalysis","document","title","process","async","listActives","load","undefined","historicoAcoes","listByCode","_x$open","_x$close","_x$high","_x$low","open","close","_x$alvo","_x$alvo2","_x$alvo3","_x$fibo","_x$fibo2","_x$fibo3","_x$fibo4","_x$fibo5","loadHistory","Layout","htmlFor","id","name","s","_Fragment","style","maxHeight","overflow","filterAnalysis","JSON","stringify"],"sourceRoot":""}