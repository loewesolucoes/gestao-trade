{"version":3,"file":"static/js/996.47db8787.chunk.js","mappings":"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","sources":["workers/common.ts","workers/db-connector.ts","repositories/database-connector.ts","utils/repository.ts","repositories/default.ts","repositories/parametros.ts","repositories/historico-acoes.ts","utils/notification.ts","workers/yahoo.ts","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["export enum WorkersActions {\r\n  LOAD_ALL = \"loadAll\",\r\n  CONNECT = \"connect\",\r\n}\r\n\r\nexport interface GestaoMessage {\r\n  id: number;\r\n  action: WorkersActions;\r\n  params: any;\r\n}\r\n\r\nexport const UNIQUE_KEY = crypto.randomUUID();\r\nexport const DB_BROADCAST_CHANNEL_SW_KEY = 'DB_BROADCAST_CHANNEL_SW'","import { IDatabase } from \"../repositories/database-connector\";\r\nimport { DB_BROADCAST_CHANNEL_SW_KEY, UNIQUE_KEY } from \"./common\";\r\n\r\nconst DB_CHANNEL_SEND = `gestao-database-channel-send-${UNIQUE_KEY}`;\r\nconst DB_CHANNEL_RECEIVE = `gestao-database-channel-receive-${UNIQUE_KEY}`;\r\n\r\nexport class WorkerDatabaseConnector implements IDatabase {\r\n  private readonly broadcastSend: BroadcastChannel = new BroadcastChannel(DB_CHANNEL_SEND);\r\n  private readonly broadcastReceive: BroadcastChannel = new BroadcastChannel(DB_CHANNEL_RECEIVE);\r\n  private readonly broadcastConnect: BroadcastChannel = new BroadcastChannel(DB_BROADCAST_CHANNEL_SW_KEY);\r\n  private readonly onMessages: ((event: MessageEvent) => void)[] = [];\r\n  private readonly onExecMessages: { [key: string]: (event: MessageEvent) => void } = {};\r\n  private readonly workerName: string\r\n  private currentId = 0;\r\n\r\n  constructor(workerName: string) {\r\n    this.workerName = `sw-${workerName}`;\r\n\r\n    this.broadcastReceive.onmessage = (event) => {\r\n      const { id } = event.data;\r\n      const action = this.onExecMessages[id];\r\n\r\n      if (action == null) {\r\n        // se estiver dando erro nessa parte deve ser devido a possuir duas tabs abertas\r\n        console.debug('invalid message id', id, event);\r\n\r\n        throw new Error(`invalid message id => ${id} (pode ser que você esteja com outra tab aberta)`);\r\n      }\r\n\r\n      action(event);\r\n      delete this.onExecMessages[id];\r\n    }\r\n\r\n    this.broadcastReceive.onmessageerror = (event) => {\r\n      console.error('WorkerDatabaseConnector.onmessageerror', event);\r\n    }\r\n\r\n    this.broadcastConnect.postMessage({\r\n      id: 'connect',\r\n      swName: this.workerName,\r\n      sendChannel: DB_CHANNEL_SEND,\r\n      receiveChannel: DB_CHANNEL_RECEIVE,\r\n    })\r\n  }\r\n\r\n  public setOnMessage(action: (e: MessageEvent) => void) {\r\n    this.onMessages.push(action);\r\n  }\r\n\r\n  public postReceive(event: MessageEvent) {\r\n    this.broadcastReceive.postMessage(event.data);\r\n  }\r\n\r\n  public async exec(sql: string, params?: any): Promise<initSqlJs.QueryExecResult[]> {\r\n    const nextId = `${this.workerName}:exec-${this.currentId++}`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.onExecMessages[nextId] = event => {\r\n        console.debug('WorkerDatabaseConnector.onmessage', event.data.id, nextId, event);\r\n\r\n        if (event.data.id === nextId) {\r\n          if (event.data.error)\r\n            reject(event.data);\r\n          else\r\n            resolve(event.data.results);\r\n        }\r\n      };\r\n\r\n      console.debug('WorkerDatabaseConnector.sending', 'exec', nextId, sql, params);\r\n\r\n      this.broadcastSend.postMessage({\r\n        id: nextId,\r\n        action: \"exec\",\r\n        sql: sql,\r\n        params: params\r\n      });\r\n    });\r\n  }\r\n\r\n  public async export(): Promise<Uint8Array> {\r\n    const nextId = `${this.workerName}:export-${this.currentId++}`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.onExecMessages[nextId] = event => {\r\n        console.debug('WorkerDatabaseConnector.onmessage', event.data.id, nextId, event);\r\n\r\n        if (event.data.id === nextId) {\r\n          if (event.data.error)\r\n            reject(event.data);\r\n          else\r\n            resolve(event.data.buffer);\r\n        }\r\n      };\r\n\r\n      console.debug('WorkerDatabaseConnector.sending', 'export', nextId);\r\n\r\n      this.broadcastSend.postMessage({\r\n        id: nextId,\r\n        action: \"export\",\r\n      });\r\n    });\r\n  }\r\n\r\n  public async open(data?: Buffer | ArrayLike<number> | null | undefined): Promise<any> {\r\n    throw new Error(\"Method not implemented.\");\r\n  }\r\n}","\r\nexport interface IDatabase {\r\n  exec(sql: string, params?: any): Promise<initSqlJs.QueryExecResult[]>\r\n  export(): Promise<Uint8Array>\r\n  open(data?: ArrayLike<number> | Buffer | null): Promise<any>\r\n}\r\n\r\n\r\nexport class DatabaseConnector implements IDatabase {\r\n  private currentId = 0;\r\n  private readonly worker: Worker;\r\n  private readonly onMessages: { [key: string]: (event: MessageEvent) => void } = {};\r\n\r\n  constructor() {\r\n    this.worker = new Worker(new URL(\"../workers/db-broadcast.ts\", import.meta.url));\r\n    this.worker.onerror = e => console.log(\"Worker error: \", e);\r\n    this.worker.onmessage = (event) => {\r\n      const { id } = event.data;\r\n      const action = this.onMessages[id];\r\n\r\n      if (action == null) {\r\n        console.error('invalid message id', id, event);\r\n\r\n        throw new Error(`invalid message id => ${id}`);\r\n      }\r\n\r\n      action(event);\r\n      delete this.onMessages[id];\r\n    }\r\n  }\r\n\r\n  public async exec(sql: string, params?: any): Promise<initSqlJs.QueryExecResult[]> {\r\n    const nextId = `exec-${this.currentId++}`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.onMessages[nextId] = event => {\r\n        console.debug('DatabaseConnector.onmessage', event.data.id, nextId, event);\r\n\r\n        if (event.data.id === nextId) {\r\n          if (event.data.error)\r\n            reject(event.data);\r\n          else\r\n            resolve(event.data.results);\r\n        }\r\n      };\r\n\r\n      console.debug('DatabaseConnector.sending', 'exec', nextId, sql, params);\r\n\r\n      this.worker.postMessage({\r\n        id: nextId,\r\n        action: \"exec\",\r\n        sql: sql,\r\n        params: params\r\n      });\r\n    });\r\n  }\r\n\r\n  public async export(): Promise<Uint8Array> {\r\n    const nextId = `export-${this.currentId++}`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.onMessages[nextId] = event => {\r\n        console.debug('DatabaseConnector.onmessage', event.data.id, nextId, event);\r\n        if (event.data.id === nextId) {\r\n          if (event.data.error)\r\n            reject(event.data);\r\n          else\r\n            resolve(event.data.buffer);\r\n        }\r\n      };\r\n\r\n      console.debug('DatabaseConnector.sending', 'export', nextId);\r\n\r\n      this.worker.postMessage({\r\n        id: nextId,\r\n        action: \"export\",\r\n      });\r\n    });\r\n  }\r\n\r\n  public async open(data?: ArrayLike<number> | Buffer | null): Promise<any> {\r\n    const nextId = `open-${this.currentId++}`;\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.onMessages[nextId] = event => {\r\n        console.debug('DatabaseConnector.onmessage', event.data.id, nextId, event);\r\n        if (event.data.id === nextId) {\r\n          if (event.data.error)\r\n            reject(event.data);\r\n          else\r\n            resolve(event.data);\r\n        }\r\n      };\r\n\r\n      console.debug('DatabaseConnector.sending', 'open', nextId);\r\n\r\n      this.worker.postMessage({\r\n        id: nextId,\r\n        action: \"open\",\r\n        buffer: data, /*Optional. An ArrayBuffer representing an SQLite Database file*/\r\n      });\r\n    });\r\n  }\r\n}","import localforage from 'localforage'\r\nimport { Buffer } from 'buffer';\r\nimport { DefaultRepository } from '../repositories/default';\r\nimport { DatabaseConnector } from '../repositories/database-connector';\r\n\r\nconst BUFFER_TYPE = 'base64';\r\n\r\nexport class RepositoryUtil {\r\n  public static readonly DB_NAME = 'gestao-trade.settings.db';\r\n\r\n  public static async create(data?: ArrayLike<number> | Buffer | null) {\r\n    const localDump = await RepositoryUtil.exportLocalDump();\r\n\r\n    if (data == null && localDump != null) {\r\n      data = Buffer.from(localDump, BUFFER_TYPE);\r\n    }\r\n\r\n    const db = new DatabaseConnector();\r\n\r\n    await db.open(data);\r\n\r\n    const repo = new DefaultRepository(db);\r\n\r\n    // @ts-ignore\r\n    await repo.runMigrations();\r\n\r\n    if (process.env.NODE_ENV !== 'production') {\r\n      //@ts-ignore\r\n      window._db = db;\r\n    }\r\n\r\n    // repo.beforeClose();\r\n\r\n    return repo;\r\n  }\r\n\r\n  public static async persistLocalDump(dump?: string): Promise<void> {\r\n    await localforage.setItem(RepositoryUtil.DB_NAME, dump || '');\r\n  }\r\n\r\n  public static async exportLocalDump(): Promise<string | null> {\r\n    return await localforage.getItem<string>(RepositoryUtil.DB_NAME);\r\n  }\r\n\r\n  public static generateDumpFromExport(exp: Uint8Array) {\r\n    return Buffer.from(exp).toString(BUFFER_TYPE);\r\n  }\r\n}","import BigNumber from \"bignumber.js\";\r\nimport moment from \"moment\";\r\nimport { RepositoryUtil } from \"../utils/repository\";\r\nimport { IDatabase } from \"./database-connector\";\r\n\r\nexport enum MapperTypes {\r\n  DATE,\r\n  DATE_TIME,\r\n  NUMBER,\r\n  BOOLEAN,\r\n  IGNORE,\r\n}\r\n\r\nexport enum TableNames {\r\n  ACOES = \"acoes\",\r\n  HISTORICO_ACOES = \"historico_acoes\",\r\n  PARAMETROS = \"parametros\",\r\n}\r\n\r\nexport interface DefaultFields {\r\n  id: number\r\n  createdDate: Date\r\n  updatedDate?: Date\r\n}\r\n\r\nconst RUNNED_MIGRATION_CODE = 'runned';\r\n\r\nexport class DefaultRepository {\r\n  protected readonly DEFAULT_MAPPING = { createdDate: MapperTypes.DATE_TIME, updatedDate: MapperTypes.DATE_TIME, monthYear: MapperTypes.IGNORE };\r\n  public constructor(protected db: IDatabase) { }\r\n\r\n  public async saveAll(tableName: TableNames, items: DefaultFields[]) {\r\n    const fullCommand = ['BEGIN TRANSACTION'];\r\n    let allParams = {};\r\n\r\n    console.debug('saveAll:start')\r\n\r\n    for (let index = 0; index < items.length; index++) {\r\n      const item = items[index];\r\n      let execution = {} as any;\r\n\r\n      if (item.id == null)\r\n        execution = this.createInsertCommand(tableName, item, `${index}`);\r\n      else\r\n        execution = this.createUpdateCommand(tableName, item, `${index}`);\r\n\r\n      const { command, params } = execution;\r\n\r\n      fullCommand.push(command);\r\n      allParams = Object.assign(allParams, params);\r\n    }\r\n\r\n    fullCommand.push('COMMIT');\r\n\r\n    const fullCommandStr = fullCommand.join(';');\r\n\r\n    console.debug('saveAll:parse:ok')\r\n\r\n    await this.db.exec(fullCommandStr, allParams);\r\n\r\n    console.debug('saveAll:exec:ok')\r\n\r\n    await this.persistDb();\r\n\r\n    console.debug('saveAll:persist:ok')\r\n\r\n    console.debug('saveAll:end')\r\n  }\r\n\r\n  public async save(tableName: TableNames, data: any) {\r\n    let result = {} as any;\r\n\r\n    if (data?.id != null)\r\n      result = await this.update(tableName, data)\r\n    else\r\n      result = await this.insert(tableName, data);\r\n\r\n    await this.persistDb();\r\n\r\n    return result;\r\n  }\r\n\r\n  public async delete(tableName: TableNames, id: number) {\r\n    let result = {} as any;\r\n\r\n    await this.db.exec(`delete from ${tableName} where id = $id`, { \"$id\": id })\r\n\r\n    await this.persistDb();\r\n\r\n    return result;\r\n  }\r\n\r\n  public async list<T>(tableName: TableNames): Promise<T[]> {\r\n    const result = await this.db.exec(`SELECT * FROM ${tableName} order by createdDate desc`);\r\n\r\n    if (!Array.isArray(result))\r\n      throw new Error(`${tableName} não encontrado (a)`);\r\n\r\n    return this.parseSqlResultToObj(result, this.DEFAULT_MAPPING)[0] || [];\r\n  }\r\n\r\n  public async get<T>(tableName: TableNames, id: string): Promise<T> {\r\n    const result = await this.db.exec(`select * from ${tableName} where id = $id`, { \"$id\": id });\r\n\r\n    if (result.length === 0)\r\n      throw new Error(`${tableName} não encontrado (a)`);\r\n\r\n    return this.parseSqlResultToObj(result, this.DEFAULT_MAPPING)[0][0];\r\n  }\r\n\r\n  protected async insert(tableName: TableNames, data: any) {\r\n    const { command, params, nextData } = this.createInsertCommand(tableName, data);\r\n    const fullCommand = `${command};SELECT LAST_INSERT_ROWID();`\r\n\r\n    const result = await this.db.exec(fullCommand, params);\r\n\r\n    nextData.id = result[0].values[0][0];\r\n\r\n    return nextData;\r\n  }\r\n\r\n  protected createInsertCommand(tableName: TableNames, data: any, paramsPrefix: string = '') {\r\n    const nextData = { ...data, createdDate: new Date() };\r\n    const { keys, params } = this.parseToCommand(nextData, paramsPrefix);\r\n    const valuesCommand = `(${keys.map(k => `$${k}${paramsPrefix}`).join(', ')})`\r\n    const command = `INSERT INTO ${tableName} (${keys.join(', ')}) VALUES ${valuesCommand}`;\r\n\r\n    return { command, params, nextData, valuesCommand }\r\n  }\r\n\r\n  protected async update(tableName: TableNames, data: any) {\r\n    const { command, params } = this.createUpdateCommand(tableName, data);\r\n\r\n    await this.db.exec(command, params);\r\n\r\n    return this.get(tableName, data.id);\r\n  }\r\n\r\n  protected createUpdateCommand(tableName: TableNames, data: any, paramsPrefix: string = '') {\r\n    const nextData = { ...data, updatedDate: new Date() };\r\n    const { keys, params } = this.parseToCommand(nextData, paramsPrefix);\r\n    const command = `UPDATE ${tableName} SET ${keys.map(k => `${k}=$${k}${paramsPrefix}`).join(', ')} WHERE id=$id${paramsPrefix}`;\r\n\r\n    return { command, params, nextData }\r\n  }\r\n\r\n  protected parseSqlResultToObj(result: initSqlJs.QueryExecResult[], mapper?: { [key: string]: MapperTypes }) {\r\n    return result.map(res => res.values.map(values => res.columns.reduce((p, n, i) => {\r\n      const value = values[i];\r\n      let original = true;\r\n\r\n      if (n !== 'id' && value != null) {\r\n        if (mapper != null) {\r\n          if (mapper[n] === MapperTypes.DATE) {\r\n            p[n] = moment(value as any, 'YYYY-MM-DD').toDate(); //2022-11-03 00:00:00\r\n            original = false;\r\n          } else if (mapper[n] === MapperTypes.DATE_TIME) {\r\n            p[n] = moment(value as any, 'YYYY-MM-DD hh:mm:ss').toDate(); //2022-11-03 00:00:00\r\n            original = false;\r\n          } else if (mapper[n] === MapperTypes.NUMBER) {\r\n            p[n] = value;\r\n            original = false;\r\n          } else if (mapper[n] === MapperTypes.BOOLEAN) {\r\n            p[n] = !!value;\r\n            original = false;\r\n          } else if (mapper[n] === MapperTypes.IGNORE) {\r\n            original = false;\r\n          }\r\n        }\r\n\r\n        if (original && typeof (value) === 'number') {\r\n          p[n] = BigNumber(value);\r\n          original = false;\r\n        }\r\n      }\r\n\r\n      if (original)\r\n        p[n] = value;\r\n\r\n      return p;\r\n    }, {} as any)));\r\n  }\r\n\r\n  protected parseToCommand(nextData: any, paramsPrefix: string = '') {\r\n    const keys = Object.keys(nextData).filter(k => nextData[k] !== undefined);\r\n    const params = keys.reduce((p, n) => {\r\n      let value = nextData[n] ?? null;\r\n\r\n      if (value instanceof Date) {\r\n        value = moment(value).format();\r\n      }\r\n\r\n      if (value?._isBigNumber) {\r\n        value = value.toNumber();\r\n      }\r\n\r\n      p[`$${n}${paramsPrefix}`] = value;\r\n\r\n      return p;\r\n    }, {} as any);\r\n\r\n    return { keys, params };\r\n  }\r\n\r\n  protected async runMigrations() {\r\n    await Promise.resolve();\r\n\r\n    await this.db.exec(`CREATE TABLE IF NOT EXISTS \"migrations\" (\"id\" INTEGER NOT NULL,\"name\" TEXT NULL DEFAULT NULL,\"executedDate\" DATETIME NULL,PRIMARY KEY (\"id\"));`);\r\n\r\n    const result = await this.db.exec('select * from \"migrations\"');\r\n    const migrations = (this.parseSqlResultToObj(result)[0] || []).reduce((p, n) => { p[n.name] = n; return p; }, {} as any);\r\n\r\n    if (migrations['parametros'] == null) {\r\n      await this.db.exec(`CREATE TABLE IF NOT EXISTS \"parametros\" (\"id\" INTEGER NOT NULL,\"chave\" TEXT NOT NULL,\"valor\" TEXT NULL, \"createdDate\" DATETIME NOT NULL, \"updatedDate\" DATETIME NULL DEFAULT NULL,PRIMARY KEY (\"id\"));`);\r\n      migrations['parametros'] = RUNNED_MIGRATION_CODE;\r\n    }\r\n\r\n    if (migrations['acoes'] == null) {\r\n      await this.db.exec(`CREATE TABLE IF NOT EXISTS \"acoes\" (\"id\" INTEGER NOT NULL,\"nome\" TEXT NOT NULL,\"logo\" TEXT NULL,\"codigo\" TEXT NULL, \"tipo\" INTEGER NULL, \"active\" INTEGER NULL, \"valorDeMercado\" REAL NULL, \"setor\" TEXT NULL, \"createdDate\" DATETIME NOT NULL, \"updatedDate\" DATETIME NULL DEFAULT NULL,PRIMARY KEY (\"id\"));`);\r\n      migrations['acoes'] = RUNNED_MIGRATION_CODE;\r\n    }\r\n\r\n    if (migrations['desativar_acoes'] == null) {\r\n      await this.db.exec(`UPDATE acoes SET \"active\" = 0 WHERE 1 = 1;`);\r\n      migrations['desativar_acoes'] = RUNNED_MIGRATION_CODE;\r\n    }\r\n\r\n    if (migrations['historico_acoes'] == null) {\r\n      await this.db.exec(`DROP TABLE IF EXISTS \"historico_acoes\"`);\r\n      await this.db.exec(`CREATE TABLE IF NOT EXISTS \"historico_acoes\" (\"id\" INTEGER NOT NULL,\"codigo\" TEXT NOT NULL,\"date\" DATETIME NOT NULL,\"open\" REAL NULL,\"high\" REAL NULL,\"low\" REAL NULL,\"close\" REAL NULL,\"adjustedClose\" REAL NULL,\"volume\" REAL NULL,\"intervalo\" TEXT NOT NULL, \"createdDate\" DATETIME NOT NULL, \"updatedDate\" DATETIME NULL DEFAULT NULL,PRIMARY KEY (\"id\"));`);\r\n      migrations['historico_acoes'] = RUNNED_MIGRATION_CODE;\r\n    }\r\n\r\n    // TODO: Add parametros iniciais em branco\r\n\r\n    const runnedMigrations = Object.keys(migrations).filter(x => migrations[x] === RUNNED_MIGRATION_CODE).reduce((p, n) => { p.push({ name: n, executedDate: new Date() }); return p; }, [] as any)\r\n\r\n    let allParams = {};\r\n    let fullCommand = '';\r\n\r\n    if (runnedMigrations.length > 0) {\r\n      runnedMigrations.forEach((x, i) => {\r\n        const { keys, params } = this.parseToCommand(x, `${i}`);\r\n        const command = `INSERT INTO \"migrations\" (${keys.join(', ')}) VALUES (${keys.map(k => `$${k}${i}`).join(', ')})`;\r\n\r\n        fullCommand = `${fullCommand};${command}`\r\n        allParams = { ...allParams, ...params }\r\n      });\r\n\r\n      await this.db.exec(fullCommand, allParams);\r\n    }\r\n\r\n    await this.persistDb();\r\n  }\r\n\r\n  public async exportOriginalDump() {\r\n    return await this.db.export();\r\n  }\r\n\r\n  public async persistDb() {\r\n    const dump = await this.exportDump();\r\n\r\n    await RepositoryUtil.persistLocalDump(dump)\r\n    console.debug(\"persistDb ok\");\r\n  }\r\n\r\n  private async exportDump() {\r\n    await Promise.resolve();\r\n    const exp = await this.db.export();\r\n\r\n    return await RepositoryUtil.generateDumpFromExport(exp)\r\n  }\r\n\r\n  private beforeClose() {\r\n    const beforeUnload = (e: any) => {\r\n      const message = \"Ter certeza que deseja sair?\";\r\n      const event = e || window.event;\r\n\r\n      // For IE and Firefox\r\n      if (event) {\r\n        event.returnValue = message;\r\n      }\r\n\r\n      this.persistDb();\r\n\r\n      // For Safari\r\n      return message;\r\n    };\r\n\r\n    window.addEventListener(\"beforeunload\", beforeUnload);\r\n  }\r\n}","import { DefaultFields, DefaultRepository, TableNames } from \"./default\";\r\n\r\nexport interface Parametro extends DefaultFields {\r\n  chave: string\r\n  valor?: string\r\n}\r\n\r\nconst BRAPI_KEY = 'BRAPI_API_KEY';\r\n\r\nexport class ParametrosRepository extends DefaultRepository {\r\n  private _paramsDict?: { [key: string]: Parametro };\r\n\r\n  public async getDict(): Promise<{ [key: string]: Parametro }> {\r\n    if (this._paramsDict == null) {\r\n      this._paramsDict = await this.loadParamsOrDefault();\r\n    }\r\n\r\n    return this._paramsDict;\r\n  }\r\n\r\n  private async loadParamsOrDefault() {\r\n    const params = (await this.list<Parametro>(TableNames.PARAMETROS)).reduce((p, n) => { p[n.chave] = n; return p; }, {});\r\n    const nextParams = params;\r\n\r\n    nextParams[BRAPI_KEY] = params[BRAPI_KEY] || { chave: BRAPI_KEY, valor: '' };\r\n\r\n    const newParams = Object.keys(nextParams).map(x => nextParams[x]).filter(x => x.id == null);\r\n\r\n    await Promise.all(newParams.map(x => this.save(TableNames.PARAMETROS, x)));\r\n\r\n    return nextParams;\r\n  }\r\n\r\n  public async getByKey(chave: string): Promise<Parametro> {\r\n    return (await this.getDict())[chave];\r\n  }\r\n\r\n  public async getValorByKey(chave: string): Promise<string | undefined> {\r\n    return (await this.getDict())[chave]?.valor;\r\n  }\r\n\r\n  public async set(chave: string, valor?: string) {\r\n    const paramsDict = await this.getDict();\r\n    let param = paramsDict[chave];\r\n\r\n    if (param == null)\r\n      param = {} as any;\r\n\r\n    const result = await this.save(TableNames.PARAMETROS, { ...param, chave, valor });\r\n\r\n    delete this._paramsDict;\r\n\r\n    return result;\r\n  }\r\n}","import BigNumber from \"bignumber.js\";\r\nimport { DefaultFields, DefaultRepository } from \"./default\";\r\nimport { Acoes } from \"./acoes\";\r\nimport moment from \"moment\";\r\n\r\nexport enum IntervaloHistoricoAcoes {\r\n  UM_MINUTO = '1m',\r\n  CINCO_MINUTOS = '5m',\r\n  UM_DIA = '1d',\r\n}\r\n\r\nexport interface HistoricoAcoes extends DefaultFields {\r\n  codigo: string;\r\n  date: Date;\r\n  open?: BigNumber;\r\n  high?: BigNumber;\r\n  low?: BigNumber;\r\n  close?: BigNumber;\r\n  adjustedClose?: BigNumber;\r\n  volume?: BigNumber;\r\n  intervalo: IntervaloHistoricoAcoes\r\n}\r\n\r\nexport interface IntegracaoHistoricoAcao {\r\n  periodStart: moment.Moment\r\n  periodEnd: moment.Moment\r\n  codigoAcao: string\r\n  logoAcao?: string\r\n  idAcao: number\r\n  intervalo: IntervaloHistoricoAcoes\r\n}\r\n\r\nexport class HistoricoAcoesRepository extends DefaultRepository {\r\n  public readonly HISTORICO_ACOES_MAPPING = { ...this.DEFAULT_MAPPING };\r\n\r\n  public async listByCode(codigo: string): Promise<HistoricoAcoes[]> {\r\n    const query = `\r\n    SELECT *\r\n    FROM historico_acoes h\r\n    WHERE h.\"codigo\" = $codigo\r\n    GROUP BY h.\"codigo\", h.\"date\"\r\n    ORDER BY h.\"date\" asc;\r\n    `;\r\n\r\n    const result = await this.db.exec(query, { $codigo: codigo });\r\n\r\n    const parsed = this.parseSqlResultToObj(result, this.HISTORICO_ACOES_MAPPING);\r\n\r\n    return parsed[0] || [];\r\n  }\r\n\r\n  public async ultimasAtualizacoesEAtivos(intervalo: IntervaloHistoricoAcoes): Promise<{ ultimasAtualizacoes: HistoricoAcoes[], ativos: Acoes[] }> {\r\n    const query = `\r\n    SELECT *\r\n    FROM acoes a\r\n    WHERE a.\"active\" = 1;\r\n\r\n    SELECT h.*, MAX(h.date) AS date\r\n    FROM acoes a\r\n    JOIN historico_acoes h\r\n      ON a.codigo = h.codigo\r\n    WHERE a.\"active\" = 1\r\n      AND h.\"intervalo\" = $intervalo\r\n    GROUP BY h.codigo;\r\n    `;\r\n\r\n    const result = await this.db.exec(query, { $intervalo: intervalo });\r\n\r\n    const parsed = this.parseSqlResultToObj(result, this.HISTORICO_ACOES_MAPPING);\r\n\r\n    return {\r\n      ativos: parsed[0] || [],\r\n      ultimasAtualizacoes: parsed[1] || [],\r\n    };\r\n  }\r\n\r\n  public async acoesQuePrecisamAtualizar(intervalo: IntervaloHistoricoAcoes): Promise<IntegracaoHistoricoAcao[]> {\r\n    const TODAY_DATE = new Date();\r\n    const { ultimasAtualizacoes, ativos } = await this.ultimasAtualizacoesEAtivos(intervalo);\r\n\r\n    console.debug('ultimasAtualizacoesEAtivos', ultimasAtualizacoes, ativos);\r\n\r\n    const dict = ultimasAtualizacoes.reduce((p, n) => { p[n.codigo] = n; return p }, {});\r\n\r\n    return ativos.map(x => {\r\n      const historico = dict[x.codigo] as HistoricoAcoes;\r\n      const acaoIntegracao = {\r\n        periodStart: moment(\"1900-01-01\", 'YYYY-MM-DD'),\r\n        periodEnd: moment(new Date()).add(1, 'day'),\r\n        codigoAcao: x.codigo,\r\n        logoAcao: x.logo,\r\n        idAcao: x.id,\r\n        intervalo: intervalo,\r\n      };\r\n\r\n      if (historico != null) {\r\n        acaoIntegracao.periodStart = moment(historico.createdDate);\r\n\r\n        if (acaoIntegracao.periodStart.isSame(TODAY_DATE, \"day\")) {\r\n          // @ts-ignore\r\n          acaoIntegracao.codigoAcao = undefined;\r\n        }\r\n      }\r\n\r\n      return acaoIntegracao\r\n    }).filter(x => x.codigoAcao != null)\r\n  }\r\n}","export class NotificationUtil {\r\n  public static readonly TIME_TO_CLOSE_NOTIFICATION = 10000;\r\n  public static readonly NOTIFICATION_BROADCAST_CHANNEL_KEY = 'NOTIFICATION_BROADCAST_CHANNEL_KEY'\r\n  public static readonly broadcast: BroadcastChannel = new BroadcastChannel(NotificationUtil.NOTIFICATION_BROADCAST_CHANNEL_KEY);\r\n\r\n  public static send(message: string): any {\r\n    NotificationUtil.broadcast.postMessage({\r\n      message,\r\n    })\r\n  }\r\n}\r\n","import { GestaoMessage, WorkersActions } from \"./common\";\r\nimport { WorkerDatabaseConnector } from \"./db-connector\";\r\nimport { ParametrosRepository } from \"../repositories/parametros\";\r\nimport moment from \"moment\";\r\nimport { HistoricoAcoes, HistoricoAcoesRepository, IntegracaoHistoricoAcao, IntervaloHistoricoAcoes } from \"../repositories/historico-acoes\";\r\nimport { NotificationUtil } from \"../utils/notification\";\r\nimport { TableNames } from \"../repositories/default\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\n/* eslint-disable no-restricted-globals */\r\nconsole.debug('yahoo-worker start');\r\n\r\nconst YAHOO_LAST_UPDATE_KEY = 'YAHOO_LAST_UPDATE';\r\nconst dbWorker = new WorkerDatabaseConnector(`yahoo`);\r\nconst repository = new HistoricoAcoesRepository(dbWorker);\r\nconst paramsRepository = new ParametrosRepository(dbWorker);\r\n\r\nself.onmessage = (event: MessageEvent<GestaoMessage>) => {\r\n  console.debug('yahoo.onmessage', event);\r\n\r\n  switch (event.data.action) {\r\n    case WorkersActions.LOAD_ALL: {\r\n      loadAll(event.data);\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * \r\n * Date,Open,High,Low,Close,Adj Close,Volume\r\n2000-01-03,4.593750,4.593750,4.593750,4.593750,1.369073,3998720000\r\n2000-01-04,4.335937,4.335937,4.335937,4.335937,1.292237,3098880000\r\n2000-01-05,4.394531,4.394531,4.394531,4.394531,1.309699,6645760000\r\n2000-01-06,4.359375,4.359375,4.359375,4.359375,1.299222,3303680000\r\n */\r\n\r\nasync function loadAll(data: GestaoMessage) {\r\n  const intervalo = IntervaloHistoricoAcoes.UM_DIA;\r\n\r\n  const acoesIntegracao = await repository.acoesQuePrecisamAtualizar(intervalo);\r\n\r\n  console.debug('check if need to call yahoo', acoesIntegracao);\r\n\r\n  if (acoesIntegracao.length > 0) {\r\n    console.debug('calling yahoo');\r\n\r\n    for (let index = 0; index < acoesIntegracao.length; index++) {\r\n      await downloadAndSaveIfNeed(acoesIntegracao[index]);\r\n    }\r\n\r\n    console.debug('end calling yahoo');\r\n  } else console.debug('not needed to call yahoo;')\r\n\r\n  console.debug('loadAll:end');\r\n\r\n  self.postMessage({ id: data.id, response: { success: true } });\r\n}\r\n\r\nasync function downloadAndSaveIfNeed(acaoIntegracao: IntegracaoHistoricoAcao) {\r\n  const { codigoAcao, periodEnd, periodStart, intervalo } = (acaoIntegracao || {});\r\n\r\n  try {\r\n    const records = await downloadHistoricalDataAndParse(codigoAcao, periodStart, periodEnd, intervalo);\r\n\r\n    if (records.length > 0) {\r\n      console.debug(`yahoo:${codigoAcao} saveAll start`);\r\n      await repository.saveAll(TableNames.HISTORICO_ACOES, records);\r\n\r\n      console.debug(`yahoo:${codigoAcao} saveAll ok`);\r\n    } else console.debug(`not needed to save yahoo for: ${codigoAcao}`);\r\n  } catch (ex) {\r\n    console.error('Yahoo status error', acaoIntegracao);\r\n\r\n    NotificationUtil.send(`Erro ao integrar com o serviço yahoo => ${codigoAcao}`);\r\n  }\r\n}\r\n\r\nasync function downloadHistoricalDataAndParse(stockSymbol: string, periodStart: moment.Moment, periodEnd: moment.Moment, intervalo: IntervaloHistoricoAcoes) {\r\n  const records: HistoricoAcoes[] = [];\r\n\r\n  console.debug('downloadHistoricalDataAndParse start')\r\n\r\n  try {\r\n    const rawResponse = await fetch(`https://query1.finance.yahoo.com/v7/finance/download/${stockSymbol}.SA?period1=${periodStart.unix()}&period2=${periodEnd.unix()}&interval=${intervalo}&events=history`);\r\n\r\n    console.debug(`yahoo:${stockSymbol} fetch done`)\r\n\r\n    if (rawResponse.ok && rawResponse?.body != null) {\r\n      console.debug(`yahoo:${stockSymbol} fetch ok`)\r\n\r\n      const response = await rawResponse.text();\r\n      const lines = response.split('\\n');\r\n\r\n      console.debug(`yahoo:${stockSymbol} parse fetch start`)\r\n\r\n      for (let index = 1; index < lines.length; index++) {\r\n        const line = lines[index];\r\n\r\n        const cols = line.split(',');\r\n\r\n        const rec: HistoricoAcoes = { codigo: stockSymbol } as HistoricoAcoes;\r\n\r\n        try {\r\n          rec.date = moment(cols[0], 'YYYY-MM-DD').toDate();\r\n          rec.open = BigNumber(cols[1]);\r\n          rec.high = BigNumber(cols[2]);\r\n          rec.low = BigNumber(cols[3]);\r\n          rec.close = BigNumber(cols[4]);\r\n          rec.adjustedClose = BigNumber(cols[5]);\r\n          rec.volume = BigNumber(cols[6]);\r\n          rec.intervalo = intervalo;\r\n\r\n          records.push(rec);\r\n        } catch (ex) {\r\n          console.error('Erro ao fazer parse da linha => ', index, line, ex);\r\n        }\r\n      }\r\n\r\n      console.debug(`yahoo:${stockSymbol} parse fetch end`)\r\n    } else {\r\n      console.error('Yahoo status error', rawResponse);\r\n\r\n      NotificationUtil.send('Erro ao integrar com o serviço yahoo');\r\n    }\r\n  } catch (ex) {\r\n    console.error('Enable cors', ex);\r\n\r\n    NotificationUtil.send('Você esta sem conexão a internet ou precisa habilitar a extensão <a href=\"https://webextension.org/listing/access-control.html\" target=\"_blank\">Cors Unblock</a> para usar a aplicação')\r\n  }\r\n\r\n  return records;\r\n}\r\n\r\n\r\nconsole.debug('yahoo-worker end');\r\n\r\nexport { };","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [105], () => (__webpack_require__(996)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"105\":\"093ee82a\",\"151\":\"d3f9119b\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/gestao-trade/\";","__webpack_require__.b = self.location + \"/../../../\";\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t996: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkgestao_trade\"] = self[\"webpackChunkgestao_trade\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(105).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["WorkersActions","UNIQUE_KEY","crypto","randomUUID","DB_CHANNEL_SEND","concat","DB_CHANNEL_RECEIVE","DatabaseConnector","constructor","currentId","worker","onMessages","this","Worker","URL","onerror","e","console","log","onmessage","event","id","data","action","error","Error","exec","sql","params","nextId","Promise","resolve","reject","debug","results","postMessage","export","buffer","open","BUFFER_TYPE","RepositoryUtil","create","localDump","exportLocalDump","Buffer","from","db","repo","DefaultRepository","runMigrations","persistLocalDump","dump","localforage","DB_NAME","generateDumpFromExport","exp","toString","MapperTypes","TableNames","RUNNED_MIGRATION_CODE","DEFAULT_MAPPING","createdDate","DATE_TIME","updatedDate","monthYear","IGNORE","saveAll","tableName","items","fullCommand","allParams","index","length","item","execution","createInsertCommand","createUpdateCommand","command","push","Object","assign","fullCommandStr","join","persistDb","save","result","update","insert","delete","list","Array","isArray","parseSqlResultToObj","get","nextData","values","paramsPrefix","arguments","undefined","Date","keys","parseToCommand","valuesCommand","map","k","mapper","res","columns","reduce","p","n","i","value","original","DATE","moment","toDate","NUMBER","BOOLEAN","BigNumber","filter","_nextData$n","_value","format","_isBigNumber","toNumber","migrations","name","runnedMigrations","x","executedDate","forEach","exportOriginalDump","exportDump","beforeClose","window","addEventListener","message","returnValue","BRAPI_KEY","IntervaloHistoricoAcoes","NotificationUtil","send","broadcast","_NotificationUtil","TIME_TO_CLOSE_NOTIFICATION","NOTIFICATION_BROADCAST_CHANNEL_KEY","BroadcastChannel","dbWorker","workerName","broadcastSend","broadcastReceive","broadcastConnect","onExecMessages","onmessageerror","swName","sendChannel","receiveChannel","setOnMessage","postReceive","repository","HISTORICO_ACOES_MAPPING","listByCode","codigo","$codigo","ultimasAtualizacoesEAtivos","intervalo","$intervalo","parsed","ativos","ultimasAtualizacoes","acoesQuePrecisamAtualizar","TODAY_DATE","dict","historico","acaoIntegracao","periodStart","periodEnd","add","codigoAcao","logoAcao","logo","idAcao","isSame","_paramsDict","getDict","loadParamsOrDefault","PARAMETROS","chave","nextParams","valor","newParams","all","getByKey","getValorByKey","_await$this$getDict$c","set","param","async","downloadAndSaveIfNeed","records","stockSymbol","rawResponse","fetch","unix","ok","body","lines","text","split","line","cols","rec","date","high","low","close","adjustedClose","volume","ex","downloadHistoricalDataAndParse","HISTORICO_ACOES","self","LOAD_ALL","UM_DIA","acoesIntegracao","response","success","loadAll","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","call","m","__webpack_exports__","O","deferred","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","key","splice","r","getter","__esModule","d","a","definition","o","defineProperty","enumerable","f","chunkId","promises","u","miniCssF","g","globalThis","Function","obj","prop","prototype","hasOwnProperty","nmd","paths","children","b","location","installedChunks","importScripts","chunkLoadingGlobal","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}