{"version":3,"file":"static/js/786.8b80015c.chunk.js","mappings":"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","sources":["components/input.tsx","utils/enum.ts","pages/acoes/acao-card/acao-card.tsx","components/chart.tsx","services/analysis.ts","pages/home/index.tsx"],"sourcesContent":["\"use client\";\r\nimport BigNumber from 'bignumber.js';\r\nimport moment from 'moment';\r\n\r\ninterface CustomProps extends React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement> {\r\n  isNumber?: boolean,\r\n  isPercent?: boolean,\r\n  groupSymbolLeft?: string,\r\n  groupSymbolRight?: string,\r\n  onChange: React.Dispatch<React.SetStateAction<any>>,\r\n  value: any,\r\n}\r\n\r\nexport function Input(props: CustomProps) {\r\n  const { onChange, isNumber, groupSymbolLeft, groupSymbolRight, isPercent, value, ...otherProps } = props;\r\n  const isInputNumber = props.type === 'number' || isNumber;\r\n  const isInputDate = props.type === 'date';\r\n  const isInputMonth = props.type === 'month';\r\n  const isTextArea = props.type === 'textarea';\r\n\r\n  function onChangeInput(event: any) {\r\n    const { value } = event.target;\r\n\r\n    const onChangeOrDefault = onChange || function () { };\r\n\r\n    if (isPercent)\r\n      onChangeOrDefault(BigNumber(value).div(100));\r\n    else if (isInputNumber)\r\n      onChangeOrDefault(BigNumber(value));\r\n    else if (isInputDate)\r\n      onChangeOrDefault(moment(value, 'YYYY-MM-DD').toDate());\r\n    else if (isInputMonth)\r\n      onChangeOrDefault(moment(value, 'YYYY-MM').toDate());\r\n    else\r\n      onChangeOrDefault(value);\r\n  }\r\n\r\n  const inputValue = parseInputValue(value, isInputNumber, isInputDate, isInputMonth, isPercent);\r\n  const input = isTextArea ? <textarea className=\"form-control\" onChange={onChangeInput} value={inputValue} {...otherProps as any} /> : <input className=\"form-control\" onChange={onChangeInput} value={inputValue} {...otherProps} />;\r\n\r\n  return groupSymbolLeft || groupSymbolRight ? (\r\n    <div className=\"input-group mb-3\">\r\n      {groupSymbolLeft && <span className=\"input-group-text\">{groupSymbolLeft}</span>}\r\n      {input}\r\n      {groupSymbolRight && <span className=\"input-group-text\">{groupSymbolRight}</span>}\r\n    </div>\r\n  ) : input;\r\n}\r\n\r\nfunction parseInputValue(value: any, isInputNumber?: boolean, isInputDate?: boolean, isInputMonth?: boolean, isPercent?: boolean) {\r\n  if (isInputNumber)\r\n    return parseNumber(value, { isPercent });\r\n\r\n  if (isInputDate)\r\n    return moment(value).format('YYYY-MM-DD');\r\n\r\n  if (isInputMonth)\r\n    return moment(value).format('YYYY-MM');\r\n\r\n  return value || ''\r\n}\r\n\r\nfunction parseNumber(value: BigNumber, { isPercent }: any) {\r\n  if (value == null || isNaN(value.toNumber()))\r\n    return '';\r\n\r\n  return isPercent ? value.times(100).toNumber() : value.toNumber();\r\n}\r\n\r\n","export class EnumUtil {\r\n  public static keyFromValue(en: any, value: any): any {\r\n    return Object.keys(en)[Object.values(en).indexOf(value)]\r\n  }\r\n\r\n  public static values(en: any): any[] {\r\n    return Object.keys(en).filter(x => isNaN(x as any))\r\n  }\r\n}\r\n","\"use client\";\r\nimport \"./styles.scss\"\r\nimport { Acoes, StockType } from \"../../../repositories/acoes\";\r\nimport { EnumUtil } from \"../../../utils/enum\";\r\n\r\ninterface CustomProps {\r\n  acao: Acoes;\r\n  isActive?: boolean;\r\n  onClick: (acao: Acoes) => void;\r\n}\r\n\r\nexport function AcaoCard(props: CustomProps) {\r\n  const { acao: stock, isActive, onClick } = props;\r\n\r\n  return (\r\n    <button type=\"button\" className={`stock-card ${isActive ? 'marked' : ''} ${stock.active ? 'active' : ''}`.trim()} onClick={() => onClick(stock)}>\r\n      <img src={stock.logo} alt={stock.nome} />\r\n      <h4>{stock.nome}</h4>\r\n      <small>{stock.codigo}</small>\r\n      <div className=\"info\">\r\n        {stock.setor && (<span>{stock.setor}</span>)}\r\n        {stock.tipo && (<span>{EnumUtil.keyFromValue(StockType, stock.tipo)}</span>)}\r\n      </div>\r\n    </button>\r\n  );\r\n}\r\n","\"use client\";\r\nimport { useEffect, useRef } from 'react';\r\nimport { CrosshairMode, LineStyle, createChart } from 'lightweight-charts';\r\nimport moment from 'moment';\r\nimport { useEnv } from '../contexts/env';\r\nimport { NotificationUtil } from '../utils/notification';\r\n\r\nexport interface ChartIntraday {\r\n  time: string,\r\n  open?: number,\r\n  close?: number,\r\n  high?: number,\r\n  low?: number,\r\n}\r\n\r\nexport interface ChartFiboLines {\r\n  fibo0: number\r\n  fibo382: number\r\n  fibo618: number\r\n  fibo50: number\r\n  fibo1000: number\r\n  dataInicio: Date\r\n  dataFim: Date\r\n  movements: any[]\r\n}\r\n\r\ninterface CustomProps {\r\n  data: ChartIntraday[],\r\n  analysis: ChartFiboLines[],\r\n  className?: string,\r\n  visibleFrom?: string,\r\n  visibleTo?: string,\r\n  options: { showFibo: boolean, showMovements: boolean }\r\n}\r\n\r\nlet chart: import('lightweight-charts').IChartApi;\r\n\r\nexport const ChartComponent = (props: CustomProps) => {\r\n  const { data, analysis, visibleFrom, visibleTo, options, ...otherProps } = props;\r\n\r\n  const chartContainerRef = useRef() as any;\r\n\r\n  useEffect(() => {\r\n    if (data == null) return;\r\n\r\n    reinitCharts();\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n\r\n      chart.remove();\r\n    };\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    reinitCharts();\r\n\r\n    if (options.showFibo) createFiboCharts();\r\n\r\n    if (options.showMovements) createMovementsCharts();\r\n  }, [options]);\r\n\r\n  function reinitCharts() {\r\n    if (chart != null) {\r\n      chartContainerRef.current.innerHTML = \"\";\r\n    }\r\n\r\n    createChartWithCandle();\r\n    setVisibleRange();\r\n  }\r\n\r\n  function handleResize() {\r\n    chart.applyOptions({ width: chartContainerRef.current.clientWidth });\r\n  };\r\n\r\n  function createChartWithCandle() {\r\n    chart = createChart(chartContainerRef.current, {\r\n      width: chartContainerRef.current.clientWidth,\r\n      height: 500,\r\n      layout: {\r\n        textColor: 'rgba(0, 0, 0, 0.9)',\r\n      },\r\n      grid: {\r\n        vertLines: {\r\n          color: 'rgba(197, 203, 206, 0.5)',\r\n        },\r\n        horzLines: {\r\n          color: 'rgba(197, 203, 206, 0.5)',\r\n        },\r\n      },\r\n      crosshair: {\r\n        mode: CrosshairMode.Normal,\r\n      },\r\n      rightPriceScale: {\r\n        borderColor: 'rgba(197, 203, 206, 0.8)',\r\n      },\r\n      timeScale: {\r\n        borderColor: 'rgba(197, 203, 206, 0.8)',\r\n      },\r\n    });\r\n\r\n    const candleSeries = chart.addCandlestickSeries({});\r\n\r\n    candleSeries.setData(data);\r\n  }\r\n\r\n  function createMovementsCharts() {\r\n    for (let index = 0; index < analysis.length; index++) {\r\n      const x = analysis[index];\r\n      const currentColor = getRandomColor();\r\n      const lineSerieFibo0 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: LineStyle.Dashed,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      });\r\n\r\n      lineSerieFibo0.setData(x.movements.map(y => ({ time: moment(y.date).format('YYYY-MM-DD'), value: y.low?.plus(y.high?.minus(y.low).div(2))?.toNumber() })));\r\n    }\r\n  }\r\n\r\n  function createFiboCharts() {\r\n    for (let index = 0; index < analysis.length; index++) {\r\n      const x = analysis[index];\r\n      const currentColor = getRandomColor();\r\n\r\n      const lineSerieFibo0 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: LineStyle.Solid,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      });\r\n\r\n      lineSerieFibo0.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo0 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo0 },\r\n      ]);\r\n      const lineSerieFibo382 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: LineStyle.Dashed,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      });\r\n\r\n      lineSerieFibo382.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo382 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo382 },\r\n      ]);\r\n      const lineSerieFibo618 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: LineStyle.Dashed,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      });\r\n\r\n      lineSerieFibo618.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo618 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo618 },\r\n      ]);\r\n      const lineSerieFibo50 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: LineStyle.Dotted,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      });\r\n\r\n      lineSerieFibo50.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo50 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo50 },\r\n      ]);\r\n      const lineSerieFibo1000 = chart.addLineSeries({\r\n        color: currentColor,\r\n        lineStyle: LineStyle.Solid,\r\n        lastValueVisible: false,\r\n        priceLineVisible: false,\r\n      });\r\n\r\n      lineSerieFibo1000.setData([\r\n        { time: moment(x.dataInicio).format('YYYY-MM-DD'), value: x.fibo1000 },\r\n        { time: moment(x.dataFim).format('YYYY-MM-DD'), value: x.fibo1000 },\r\n      ]);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    setVisibleRange();\r\n  }, [visibleFrom, visibleTo]);\r\n\r\n  function setVisibleRange() {\r\n    if (visibleFrom == null || visibleTo == null)\r\n      chart.timeScale().fitContent();\r\n    else // @ts-ignore\r\n      chart.timeScale().setVisibleRange({ from: moment(visibleFrom).unix(), to: moment(visibleTo).unix() });\r\n  }\r\n\r\n  return (\r\n    <div\r\n      ref={chartContainerRef}\r\n      {...otherProps} />\r\n  );\r\n};\r\n\r\nfunction getRandomColor() {\r\n  var letters = '0123456789ABCDEF';\r\n  var color = '#';\r\n  for (var i = 0; i < 6; i++) {\r\n    color += letters[Math.floor(Math.random() * 16)];\r\n  }\r\n  return color;\r\n}","import moment from \"moment\";\r\nimport { HistoricoAcoes } from \"../repositories/historico-acoes\";\r\nimport BigNumber from \"bignumber.js\";\r\n\r\nexport enum MovementType {\r\n  SUBIDA = \"SUBIDA\",\r\n  DESCIDA = \"DESCIDA\",\r\n  UNCOMPLETED = \"UNCOMPLETED\",\r\n}\r\n\r\nexport enum TopBottomType {\r\n  TOPO = \"TOPO\",\r\n  FUNDO = \"FUNDO\"\r\n}\r\n\r\nexport enum PivosType {\r\n  ALTA = \"ALTA\",\r\n  BAIXA = \"BAIXA\"\r\n}\r\n\r\ninterface FiboEAlvos {\r\n  movements: HistoricoAcoes[]\r\n  fibo0?: BigNumber\r\n  fibo382?: BigNumber\r\n  fibo618?: BigNumber\r\n  fibo50?: BigNumber\r\n  fibo1000?: BigNumber\r\n  alvo1?: BigNumber\r\n  bateuAlvo1?: boolean\r\n  alvo2?: BigNumber\r\n  bateuAlvo2?: boolean\r\n  alvo3?: BigNumber\r\n  bateuAlvo3?: boolean\r\n}\r\n\r\ninterface ExtremosToposEFundos extends HistoricoAcoes {\r\n  index: number\r\n  order: number\r\n  data: ExtremosData\r\n  type: TopBottomType\r\n}\r\n\r\ninterface ExtremosData extends HistoricoAcoes {\r\n  type: TopBottomType\r\n}\r\n\r\nclass AnalysisService {\r\n  public run(historyOriginal: HistoricoAcoes[], initialDate: string, endDate: string): FiboEAlvos[] {\r\n    if (historyOriginal.length === 0) return [];\r\n    const filteredHistory = historyOriginal.filter(x => moment(x.date).isBetween(initialDate, endDate));\r\n\r\n    const toposEFundos = this.toposEFundos(filteredHistory, 2);\r\n    const movementsAlta = this.parseToMovementsTresPontos(toposEFundos, PivosType.ALTA);\r\n    const movementsBaixa = this.parseToMovementsTresPontos(toposEFundos, PivosType.BAIXA);\r\n    const movementsAltaWithFibo = this.criarFiboEAlvos(movementsAlta);\r\n    const movementsBaixaWithFibo = this.criarFiboEAlvos(movementsBaixa);\r\n\r\n    return movementsAltaWithFibo.concat(movementsBaixaWithFibo);\r\n  }\r\n\r\n  private criarFiboEAlvos(toposEFundos: any[]) {\r\n    const lastMovements = toposEFundos[toposEFundos.length - 1]?.movements || [];\r\n    const lastDay = lastMovements[lastMovements.length - 1];\r\n\r\n    return toposEFundos\r\n      .map(x => {\r\n        const atual = { ...x };\r\n        const first = atual.movements[0];\r\n        const last = atual.movements[atual.movements.length - 1];\r\n        const differenceLastHighFirstLow = last.high.minus(first.low);\r\n\r\n        atual.dataInicio = first.date;\r\n        atual.dataFim = last.date;\r\n\r\n        if (atual.type === MovementType.DESCIDA) {\r\n          atual.fibo0 = first.high; // z\r\n          atual.fibo382 = first.high.minus((differenceLastHighFirstLow).times(.382));\r\n          atual.fibo618 = first.high.minus((differenceLastHighFirstLow).times(.618));\r\n          atual.fibo50 = first.high.minus((differenceLastHighFirstLow).times(.50));\r\n          atual.fibo1000 = last.low; // y\r\n          atual.alvo1 = ((atual.fibo618.minus(atual.fibo0)).div(.618)).plus(atual.fibo618); // y2 = ((x - z) / 0,618) + x\r\n          atual.bateuAlvo1 = lastDay.low.isLessThanOrEqualTo(atual.alvo1);\r\n          atual.alvo2 = ((atual.fibo50.minus(atual.fibo0)).div(.5)).plus(atual.fibo1000); // y3 = ((x - z) / 0,5) + y\r\n          atual.bateuAlvo2 = lastDay.low.isLessThanOrEqualTo(atual.alvo2);\r\n          atual.alvo3 = ((atual.fibo382.minus(atual.fibo0)).div(.382)).plus(atual.alvo1); // y4 = ((x - z) / 0,382) + y2\r\n          atual.bateuAlvo3 = lastDay.low.isLessThanOrEqualTo(atual.alvo3);\r\n        } else {\r\n          atual.fibo0 = first.low; // z\r\n          atual.fibo382 = first.low.plus((differenceLastHighFirstLow.times(.382)));\r\n          atual.fibo618 = first.low.plus(differenceLastHighFirstLow.times(.618));\r\n          atual.fibo50 = first.low.plus(differenceLastHighFirstLow.times(.50));\r\n          atual.fibo1000 = last.high; // y\r\n          atual.alvo1 = ((atual.fibo618.minus(atual.fibo0)).div(.618)).plus(atual.fibo618); // y2 = ((x - z) / 0,618) + x\r\n          atual.bateuAlvo1 = lastDay.high.isGreaterThanOrEqualTo(atual.alvo1);\r\n          atual.alvo2 = ((atual.fibo50.minus(atual.fibo0)).div(.5)).plus(atual.fibo1000); // y3 = ((x - z) / 0,5) + y\r\n          atual.bateuAlvo2 = lastDay.high.isGreaterThanOrEqualTo(atual.alvo2);\r\n          atual.alvo3 = ((atual.fibo382.minus(atual.fibo0)).div(.382)).plus(atual.alvo1); // y4 = ((x - z) / 0,382) + y2\r\n          atual.bateuAlvo3 = lastDay.high.isGreaterThanOrEqualTo(atual.alvo3);\r\n        }\r\n\r\n        return atual;\r\n      });\r\n  }\r\n\r\n  // fazer parse dos movimentos baseado em tres pontos do grafico: FUNDO, TOPO, FUNDO\r\n  // comparar primeiro fundo com o proximo\r\n  // se estiver mais alto, é uma subida\r\n  // se estiver mais baixo é uma descida\r\n  private parseToMovementsTresPontos(history: ExtremosToposEFundos[], pivo: PivosType) {\r\n    return history\r\n      .reduce(((previous, next) => {\r\n        const last = previous[previous.length - 1];\r\n\r\n        if (last == null) {\r\n          fillFirstInfo();\r\n        } else if (last.movements.length === 1) {\r\n          last.movements.push(next.data);\r\n\r\n          if (previous.length === 1) {\r\n            if (pivo === PivosType.ALTA && next.type == TopBottomType.FUNDO) fillFirstInfo();\r\n            if (pivo === PivosType.BAIXA && next.type == TopBottomType.TOPO) fillFirstInfo();\r\n          }\r\n\r\n        } else {\r\n          const firstData = last.movements[0];\r\n\r\n          last.movements.push(next.data);\r\n\r\n          if (pivo === PivosType.BAIXA)\r\n            last.movementType = firstData.high?.isLessThanOrEqualTo(next.data.high) ? MovementType.SUBIDA : MovementType.DESCIDA;\r\n          else\r\n            last.movementType = firstData.low?.isLessThanOrEqualTo(next.data.low) ? MovementType.SUBIDA : MovementType.DESCIDA;\r\n\r\n          fillFirstInfo();\r\n        }\r\n\r\n        return previous;\r\n\r\n        function fillFirstInfo() {\r\n          previous.push({\r\n            index: next.index,\r\n            order: next.order,\r\n            movements: [next.data],\r\n            movementType: MovementType.UNCOMPLETED,\r\n          });\r\n        }\r\n      }), [] as any[]);\r\n  }\r\n\r\n  private parseToMovementsDoisPontos(history: any[]) {\r\n    return history\r\n      .reduce(((previous, next) => {\r\n        const last = previous[previous.length - 1];\r\n\r\n        if (last == null) {\r\n          previous.push({\r\n            index: next.index,\r\n            order: next.order,\r\n            movements: [next.data],\r\n            movementType: MovementType.UNCOMPLETED,\r\n          });\r\n        } else {\r\n          const lastData = last.movements[last.movements.length - 1];\r\n\r\n          if (lastData.min <= next.data.min) {\r\n            previous.push({\r\n              index: last.index,\r\n              order: last.order,\r\n              movements: [lastData, next.data],\r\n              movementType: MovementType.SUBIDA,\r\n            });\r\n          } else {\r\n            previous.push({\r\n              index: last.index,\r\n              order: last.order,\r\n              movements: [lastData, next.data],\r\n              movementType: MovementType.DESCIDA,\r\n            });\r\n          }\r\n        }\r\n\r\n        return previous;\r\n      }), [] as any[]);\r\n  }\r\n\r\n  private toposEFundos(data: HistoricoAcoes[], order: number) {\r\n    const extremos = this.extremos(data, order);\r\n\r\n    const toposEFundos = extremos.topos.concat(extremos.fundos).sort((x, y) => {\r\n      if (x.index < y.index)\r\n        return -1;\r\n\r\n      if (x.index > y.index)\r\n        return 1;\r\n\r\n      return 0;\r\n    }) as any[];\r\n\r\n    const toposEFundosCompleto = toposEFundos.reduce(((previous, next) => {\r\n      const last = previous[previous.length - 1];\r\n\r\n      if (last?.type != next.type)\r\n        previous.push(next);\r\n\r\n      return previous;\r\n    }), [] as any[]);\r\n\r\n    return toposEFundosCompleto;\r\n  }\r\n\r\n  private extremos(data: HistoricoAcoes[], order: number) {\r\n    const topos: ExtremosToposEFundos[] = []\r\n    const fundos: ExtremosToposEFundos[] = []\r\n\r\n    for (let i = 0; i < data.length; i++) {\r\n      if (this.ehTopo(data, i, order)) {\r\n        topos.push({\r\n          index: i,\r\n          order: i - order,\r\n          date: data[i].date,\r\n          data: {\r\n            ...data[i],\r\n            type: TopBottomType.TOPO,\r\n          },\r\n          type: TopBottomType.TOPO,\r\n        } as any)\r\n      }\r\n\r\n      if (this.ehFundo(data, i, order)) {\r\n        fundos.push({\r\n          index: i,\r\n          order: i - order,\r\n          date: data[i].date,\r\n          data: {\r\n            ...data[i],\r\n            type: TopBottomType.FUNDO,\r\n          },\r\n          type: TopBottomType.FUNDO,\r\n        } as any)\r\n      }\r\n    }\r\n\r\n    return { topos, fundos }\r\n  }\r\n\r\n  // tks https://www.youtube.com/watch?v=X31hyMhB-3s\r\n  // Checks if there is a local top detected at curr index\r\n  private ehTopo(data: HistoricoAcoes[], index: number, order: number) {\r\n    var top = true\r\n    var currentMax = data[index].high\r\n\r\n    for (let orderIndex = 1; orderIndex < order + 1; orderIndex++) {\r\n      const nextMax = data[index + orderIndex]?.high;\r\n      const proximoEhMaior = currentMax?.isLessThanOrEqualTo(nextMax as any);\r\n\r\n      if (nextMax == null || proximoEhMaior) {\r\n        top = false\r\n        break;\r\n      }\r\n    }\r\n\r\n    return top\r\n  }\r\n\r\n  private ehFundo(data: HistoricoAcoes[], index: number, order: number) {\r\n    var bottom = true\r\n    var currentMin = data[index].low\r\n\r\n    for (let orderIndex = 1; orderIndex < order + 1; orderIndex++) {\r\n      const nextMin = data[index + orderIndex]?.low;\r\n      const proximoEhMenor = currentMin?.isGreaterThanOrEqualTo(nextMin as any);\r\n\r\n      if (nextMin == null || proximoEhMenor) {\r\n        bottom = false\r\n        break;\r\n      }\r\n    }\r\n\r\n    return bottom\r\n  }\r\n\r\n}\r\n\r\n\r\nexport const analysisService = new AnalysisService();","import logo from './logo.svg';\nimport './index.scss';\nimport { Layout } from '../../shared/layout';\nimport { useEffect, useState } from 'react';\nimport { Acoes } from '../../repositories/acoes';\nimport { useStorage } from '../../contexts/storage';\nimport { AcaoCard } from '../acoes/acao-card/acao-card';\nimport { ChartComponent, ChartIntraday } from '../../components/chart';\nimport { NotificationUtil } from '../../utils/notification';\nimport moment from 'moment';\nimport { analysisService } from '../../services/analysis';\nimport { Input } from '../../components/input';\nimport { useEnv } from '../../contexts/env';\n\nexport default function () {\n  const { isMobile } = useEnv();\n  const { isDbOk, repository } = useStorage();\n\n  const monthsBefore = isMobile ? -1 : -3;\n  const [initialDate, setInitialDate] = useState<string>(moment().add(monthsBefore, 'months').format('YYYY-MM-DD'));\n  const [endDate, setEndDate] = useState<string>(moment().format('YYYY-MM-DD'));\n  const [acoes, setAcoes] = useState<Acoes[]>();\n  const [acaoEscolhida, setAcaoEscolhida] = useState<string>();\n  const [historico, setHistorico] = useState<ChartIntraday[]>();\n  const [analysis, setAnalysis] = useState<any>();\n  const [showFibo, setShowFibo] = useState<boolean>(false);\n  const [showMovements, setShowMovements] = useState<boolean>(false);\n\n  useEffect(() => {\n    document.title = `Início | ${process.env.REACT_APP_TITLE}`\n  }, []);\n\n  useEffect(() => {\n    if (isDbOk)\n      load();\n  }, [isDbOk]);\n\n  useEffect(() => {\n    if (isDbOk)\n      loadHistory();\n  }, [isDbOk, acaoEscolhida]);\n\n  async function load() {\n    const acoes = await repository.acoes.listActives();\n\n    setAcoes(acoes);\n  }\n\n  async function loadHistory() {\n    setHistorico(undefined);\n    if (acaoEscolhida == null) return;\n\n    const historico = await repository.historicoAcoes.listByCode(acaoEscolhida);\n\n    setHistorico(historico.map(x => ({\n      time: moment(x.date).format('YYYY-MM-DD'),\n      open: x.open?.toNumber(),\n      close: x.close?.toNumber(),\n      high: x.high?.toNumber(),\n      low: x.low?.toNumber(),\n    })));\n\n    const analysis = analysisService.run(historico, initialDate, endDate);\n\n    setAnalysis(analysis\n      // @ts-ignore\n      .filter(x => x.movementType !== 'UNCOMPLETED')\n      .map(x => ({\n        ...x,\n        alvo1: x.alvo1?.toNumber(),\n        alvo2: x.alvo2?.toNumber(),\n        alvo3: x.alvo3?.toNumber(),\n        fibo0: x.fibo0?.toNumber(),\n        fibo382: x.fibo382?.toNumber(),\n        fibo618: x.fibo618?.toNumber(),\n        fibo50: x.fibo50?.toNumber(),\n        fibo1000: x.fibo1000?.toNumber(),\n      })));\n  }\n\n  return (\n    <Layout>\n      <section className='container'>\n        <div className=\"stocks\">\n          {acoes == null\n            ? <div className=\"alert alert-info\">Carregando ações ativas...</div>\n            : (\n              acoes.length === 0\n                ? (<div className=\"alert alert-info\">Nenhuma ação ativa...</div>)\n                : acoes.map(x => (\n                  <AcaoCard key={x.codigo} acao={x} isActive={x.codigo === acaoEscolhida} onClick={s => setAcaoEscolhida(s.codigo)} />\n                ))\n            )\n          }\n        </div>\n        <div className=\"configs my-3 gap-3 d-flex flex-column flex-lg-row\">\n          <div className=\"form-group\">\n            <label htmlFor=\"dataInicio\" className=\"form-label\">Data inicio:</label>\n            <Input type=\"date\" id=\"dataInicio\" name=\"dataInicio\" className=\"form-control\" value={initialDate} onChange={value => setInitialDate(value)} />\n          </div>\n          <div className=\"form-group\">\n            <label htmlFor=\"dataFim\" className=\"form-label\">Data fim:</label>\n            <Input type=\"date\" id=\"dataFim\" name=\"dataFim\" className=\"form-control\" value={endDate} onChange={value => setEndDate(value)} />\n          </div>\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowFibo(!showFibo)}>Mostrar Fibo</button>\n          <button type=\"button\" className=\"btn btn-secondary\" onClick={() => setShowMovements(!showMovements)}>Mostrar Movimentos</button>\n        </div>\n        {acaoEscolhida == null ? <div className=\"alert alert-warning\">Escolha uma ação para analisar</div>\n          : <>\n            {historico == null ? <div className=\"alert alert-info\">Carregando histórico...</div>\n              : <ChartComponent className=\"chart\" data={historico as any} visibleFrom={initialDate} visibleTo={endDate} analysis={analysis} options={{ showFibo, showMovements }}></ChartComponent>}\n            <section className=\"card analysis\">\n              <div className=\"card-header\">Analise</div>\n              <div className=\"card-body\">\n                {analysis == null ? <div className=\"alert alert-info\">Carregando analises...</div>\n                  : (\n                    <div style={{ \"whiteSpace\": \"pre\", maxHeight: 300, overflow: 'auto' }}>{filterAnalysis(analysis)}</div>\n                  )\n                }\n              </div>\n            </section>\n          </>\n        }\n      </section>\n    </Layout>\n  );\n}\n\nfunction filterAnalysis(analysis: any): any {\n  return JSON.stringify(\n    analysis\n      // .filter((x: any) => x.bateuAlvo1)\n      .map((x: any) => {\n        return {\n          ...x,\n          movements: undefined\n        }\n      })\n    , null, 4);\n}\n"],"names":["Input","props","onChange","isNumber","groupSymbolLeft","groupSymbolRight","isPercent","value","otherProps","isInputNumber","type","isInputDate","isInputMonth","isTextArea","onChangeInput","event","target","onChangeOrDefault","BigNumber","div","moment","toDate","inputValue","_ref","isNaN","toNumber","times","parseNumber","format","parseInputValue","input","_jsx","className","_jsxs","children","EnumUtil","keyFromValue","en","Object","keys","values","indexOf","filter","x","AcaoCard","acao","stock","isActive","onClick","concat","active","trim","src","logo","alt","nome","codigo","setor","tipo","StockType","chart","ChartComponent","data","analysis","visibleFrom","visibleTo","options","chartContainerRef","useRef","reinitCharts","current","innerHTML","createChart","width","clientWidth","height","layout","textColor","grid","vertLines","color","horzLines","crosshair","mode","CrosshairMode","Normal","rightPriceScale","borderColor","timeScale","addCandlestickSeries","setData","createChartWithCandle","setVisibleRange","handleResize","applyOptions","fitContent","from","unix","to","useEffect","window","addEventListener","removeEventListener","remove","showFibo","index","length","currentColor","getRandomColor","addLineSeries","lineStyle","LineStyle","Solid","lastValueVisible","priceLineVisible","time","dataInicio","fibo0","dataFim","Dashed","fibo382","fibo618","Dotted","fibo50","fibo1000","createFiboCharts","showMovements","movements","map","y","_y$low","_y$low$plus","_y$high","date","low","plus","high","minus","createMovementsCharts","ref","i","Math","floor","random","MovementType","TopBottomType","PivosType","analysisService","run","historyOriginal","initialDate","endDate","filteredHistory","isBetween","toposEFundos","this","movementsAlta","parseToMovementsTresPontos","ALTA","movementsBaixa","BAIXA","movementsAltaWithFibo","criarFiboEAlvos","movementsBaixaWithFibo","_toposEFundos","lastMovements","lastDay","atual","first","last","differenceLastHighFirstLow","DESCIDA","alvo1","bateuAlvo1","isLessThanOrEqualTo","alvo2","bateuAlvo2","alvo3","bateuAlvo3","isGreaterThanOrEqualTo","history","pivo","reduce","previous","next","fillFirstInfo","push","FUNDO","TOPO","_firstData$high","_firstData$low","firstData","movementType","SUBIDA","order","UNCOMPLETED","parseToMovementsDoisPontos","lastData","min","extremos","topos","fundos","sort","ehTopo","ehFundo","top","currentMax","orderIndex","_data","nextMax","proximoEhMaior","bottom","currentMin","_data2","nextMin","proximoEhMenor","isMobile","useEnv","isDbOk","repository","useStorage","monthsBefore","setInitialDate","useState","add","setEndDate","acoes","setAcoes","acaoEscolhida","setAcaoEscolhida","historico","setHistorico","setAnalysis","setShowFibo","setShowMovements","document","title","process","async","listActives","load","undefined","historicoAcoes","listByCode","_x$open","_x$close","_x$high","_x$low","open","close","_x$alvo","_x$alvo2","_x$alvo3","_x$fibo","_x$fibo2","_x$fibo3","_x$fibo4","_x$fibo5","loadHistory","Layout","s","htmlFor","id","name","_Fragment","style","maxHeight","overflow","filterAnalysis","JSON","stringify"],"sourceRoot":""}